# NESTO VISE O Nginx-U; ALI NE SAMO TO

**PRE SVEGA DA KAZEM JESTE DA CITAS SVE NOTES KOJE SAM NAPISAO**, ALI GLEDAJ I OLD WORKSHOP-OVE, KOJE JE JEM SNIMIO

**ONO STA CU JOS URADITI JESTE DA CU PRIKAZATI SAV SETTING, ZA JEDAN PROJEKAT**

ZELI MDA RAZUMEM Nginx KONFIGURACIJU, ALI I DA PREDSTAVIM, JEDAN SETTING ZA CEO PROJEKAT

## INSTALACIJA I STARTOVANJE Nginx-A

- sudo apt install nginx

- sudo service nginx start

## CONFIG FAJL ZA POCETAK

- sudo cat /etx/nginx/sites-available/default

```linux
##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# https://www.nginx.com/resources/wiki/start/
# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/
# https://wiki.debian.org/Nginx/DirectoryStructure
#
# In most cases, administrators will remove this file from sites-enabled/ and
# leave it as reference inside of sites-available where it will continue to be
# updated by the nginx packaging team.
#
# This file will automatically load configuration files provided by other
# applications, such as Drupal or Wordpress. These applications will be made
# available underneath a path with that package name, such as /drupal8.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

# Default server configuration
#
server {
        listen 80 default_server;
        listen [::]:80 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Note: You should disable gzip for SSL traffic.
        # See: https://bugs.debian.org/773332
        #
        # Read up on ssl_ciphers to ensure a secure configuration.
        # See: https://bugs.debian.org/765782
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        root /var/www/html;

        # Add index.php to the list if you are using PHP
        index index.html index.htm index.nginx-debian.html;

        server_name _;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }

        # pass PHP scripts to FastCGI server
        #
        #location ~ \.php$ {
        #       include snippets/fastcgi-php.conf;
        #
        #       # With php-fpm (or other unix sockets):
        #       fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;
        #       # With php-cgi (or other tcp sockets):
        #       fastcgi_pass 127.0.0.1:9000;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #       deny all;
        #}
}


# Virtual Host configuration for example.com
#
# You can move that to a different file under sites-available/ and symlink that
# to sites-enabled/ to enable it.
#
#server {
#       listen 80;
#       listen [::]:80;
#
#       server_name example.com;
#
#       root /var/www/example.com;
#       index index.html;
#
#       location / {
#               try_files $uri $uri/ =404;
#       }
#}

```

## MOGAO BI DA SREDIS OVE KOMENTARE, ODNOSNO UKLONI SVAKI KOMENTAR, KOJI GOVORI NESTO O PHP-U, JER GA NIKDA NECU KORISITI

```linux
# Default server configuration
#
server {
        listen 80 default_server;
        listen [::]:80 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Note: You should disable gzip for SSL traffic.
        # See: https://bugs.debian.org/773332
        #
        # Read up on ssl_ciphers to ensure a secure configuration.
        # See: https://bugs.debian.org/765782
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        root /var/www/html;

        index index.html index.htm index.nginx-debian.html;

        server_name _;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }

}
```

EVO SADA JE BOLJE UKLONIO SAM KOMENTARA KOLIKO SAM MISLIO DA TREBA POSTO VIDIM DA NEKI KOMENTARI MOGU BITI HINTS, NJIH NISAM UKLONIO

**NAJVAZNIJE JE DA VIDIS GORNJI** *server* BLOK U CELOSTI

**serve** BLOK PREDSTAVLJA JEDAN SERVE, TO KAZEM JER MOGU IMATI VISE SERVERA U Nginx KONFIGURACIJI (JEM NA PRIMER ZA NJEGOVE RAZLICITE DELOVE SAJTA RUNN-UJE RAZLICITE SERVER-E)

MOGU BITI SPLITTED ACROSS FILES ILI MOG BITI SVI server BLOKOVI U JEDNOM FAJLU

## PO OVOJ DEFAULT KONFIGURACIJI SERVIRA SE DEFAULT HTML PAGE, KOJI IMA NAPISAN ONAJ TEKST, KAOJI UKAZUJE DA JE Nginx INSTALIRAN

OVO SAM IZOLOVAO IZ KONFIGURACIJE DA BI POKAZAO STA ZNACI

```linux
root /var/www/html;
```

**OVO GORE TI JE DIREKTORIJUM U KOJI UBACUJES SVE PROJEKTE (DEFAULT)**

**U TOM DIREKTORIJUMU IMA SAMO** *index.nginx-debian.html*

```linux
index index.html index.htm index.nginx-debian.html;
```

ZATO SE SERVIRA STO KAO STO VIDIS OVO PREDHODNO, TO JE ZADANJI FAJL U POMENUTOJ POSTAVCI, A PREDHODNIH SPECIFICIRANIH FAJLOVA NEMA, I ZATO SE TAJ NGINX-OV DEFAULT HTML I SERVIRA

## DODAVANJEM index.html U /var/www/html SERVIRACE SE TAJ, NOVI index.html

JER SE NECI SERVIRATI DRUGI DFAULT-OVI SA LISTE

## MENI NEKAKO BOLJE ZVUCI DA NE DODAJEM JOS HTML STRANICU; **TO JE ZBOG GIT-A**

**ODNSNO NEMOJ DA JE DODAJES SVE DOK NE BUDES KREIRAO SVE POTREBNE SSH KLJUCEVE I IMAO JEDAN REMOTE REPO**

ZELIM DA KRENEM FRESH SA GIT-OM; (TO KAZEM ZBOG ONIH STVARI SA KOJIMA SAM RANIJE IMAO PROBLEM,A KADA INICIRAM NEKOLIK OREMOTE REPOZITORIJUMA, A DA U NJIMA ONDA IMAM BEZVEZNI CODE, KOJI MOZE DA BUDE U COLLISIONU WITH EACHOTHER)

USTVARI NAJBOLJE JE DA IMAS OVAKU ARHITEKTURU

## ARHITEKTURA, GDE CES PORED POSTOJECEG html FOLDER-A IMATI I app FOLDER

USTVARI JA VOLIM ARHITEKTURU, KOA JE POGODNA ZA PWA, STO SE TICE UI-A

**ODNOSNO VODI RACUNA DA I U UI FOLDERU, index.html BUDE TAJ, KOJI CE BITI U TOP LEVEL-U ui-A**

EVO POGLEDAJ NESTO OVAKO MOZES DA KREIRAS LOKALNO

NEKA TI OVO BUDE OBRAZAC

**OVO NEKA TI SE NALAZI U *var/www/***

:one: POSTOJECI *html* FOLDER OSTAJE NA MESTU

:two: PORED NJEGA STAVLJAM **app** FOLDER (ON CE BITI FOLDER ZA MOJE API-EVE (DAKLE SAMO BACKEND))

**U html FOLDER CU STAVLJATI ui**

### EVO KAKO CE TI IZGLEDATI html FOLDER (*AKO SI ZABORAVIO, Nginx KONFIGURACIJA TI JE I PODESENA DA ON BUDE root FOLDER*)

USTVARI EVO POGLEDAJ KAKO CE IZGLEDATI TVOJ CEO **/var/www**

```linux
├───app
│   ├───authentication
│   ├───databse
│   ├───helpers
│   └───utility
└───html
    │   index.nginx-debian.html               // OVO NARAVNO NECU KORISTITI, A MOGU GA DODATI U .gitignore 
    │                                         // KASNIJE KADA GA BUDES KREIRAO, NECU GA UKLANJATI, NE SMETA IAKO SE NECE KORITITI
    ├───helpers
    ├───ui
    │   ├───css
    │   ├───js
    │   └───pages
    └───utility
```

## KAKO TI JE VEC OBJASNJENO U WORKSHOPU, PROMENI OWNERSHIP ZA OVAJ *var/www* FOLDER, ODNOSNO NE ZELIS DA ZA NJEGA STALNO KORISTIS sudo

MNOGO CES RADITI U NJEMU I sudo CE BITI NEPOTREBNO

- sudo chown -R $USER:$USER /var/www

ZAPAMTI GORE IMAS DVA PUTA $USER (MOZES TO KORISTITI ,MOZES I SVOJ PRAVI NAME, $USER JE SAMO VARIJABLA ZA TVOJ NAME)

## POCECU SADA SA VERSION CONTROLL-OM

KREIRACU ssh KLJUCEVE NA SERVER-U, (OVO CE BITI NAMENJENO GITHUB-U) (CISTO POGLEDAJ DA LI IMAS STARIH KLJUCEVA NA GITHUB-U OD UNISTENIH SERVER-A, NJIH MOZES PRETY MUCH DA UKLONIS JER BEZVEZE TAMO STOJE)

- cd ~/.ssh

- ssh-keygen

NE MORAS DA MU DAJES IME, NEKA TO BUDE DEFAULT

KOPIRAJ SADA PUBLIK KLJUC NA GITHUB

KREIRAJ PRAZAN REPO NA GITHUB-U, PULLUJ GA DOWN LOKALNO, IZVRSI NEKE PROMENE KOJE ZELIS, PRE NEGO STO GA PUSHUJES BACK

******

digresija:

AKO SI NESTO POGRESIO KREIRAO GIT REPO, .git , ILI NEKI FOLDER PUN FAJLOVA MOZES UKLONITI SAMO SA

- rm -rf IME_FOLDERA

******

******

digresija:

AKO IMAS DVA INITATED GIT REPO (RANIJE SAM GOVORIO O VOOM PROBLEMU), KADA NE MOZES DA PULL-UJES

OVO JE ZATO STO SU IM UNRELATED HISTORY-JI

A TI RECIMO ZELIS DA PULLUJES NA SERVER PROMENE IZ GIT REPO-A

SAMO URADI SLEDECE

- git pull origin master  --allow-unrelated-histories

OTVORICE TI SE FAJL, SAMO NAPISI PORUKU PA MOZES DA IZADJES

*MEDJUTIM OVO GORE NIJE DOBRO JER OPET NE POVEZUJE HISTORY*

*USTVARI OVO JE BOLJI IZBOR*

**git branch --set-upstream-to=origin/master master**

IONAKO TI PISE U GIT OUTPUTU

******

## INITUJ GIT U www FOLDERU (SMES, UPRAVO CE TI OVO GORE RESITI PROBLEM STO SAM REKAO)

DOBRO SADA MOZES DA RADIS DEVELOPMENT LOKALNO JER SI KLONIRAO LOKALNO NA RACUANRU REPO, NAPRAVIO PROMENE, PA PUSHOVAO

SSH KLJUCEVI SU PODESENI
PREBRODIO SI ONO SA DIFFERENT HISTORYJEM JER TI JE REPO NA SERVERU BIO INITED

I MOZES DA POCNES DEVELOPMENT

## MOZES DA PROMENIS DAKLE ONAJ html PAGE, KOJI CE SE SERVIRATI UMESTO ONOG Nginx-OVOG

ZNAS KAKO SUVISN OJE VISE OBJASNJAVATI

## KADA DODAJES SAMO HTML WEBPAGE, KOJA JE JEDAN OD IZBORA VEC SPECIFICIRAN U Nginx KONFIGURACIJI, NE MORAS DA RESTART-UJES NGINX

