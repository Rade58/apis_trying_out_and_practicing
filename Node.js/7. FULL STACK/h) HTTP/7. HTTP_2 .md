# HTTP/2

SVE O ČEMU SMO RAZGOVARALI RANIJE, UPOTREBLJAVA, STARI PROTOKOL **HTTP1.1**, KOJI JE INVENTED 1989 GODINE, ODNSNO TO JE BIO 1.0? A 1.1 JE INVENTED 1998 ILI NEŠTO SLIČNO. PRETPOSTAVLJAM DATUME, ALI MISLIM DA SAM U PRAVU

ALI OPET, OVAJ PROTOKOL JE SAMO STANDARD SA KOJIM SU SE SVI SLOŽILI. HTTP1.1 JE BIO NAJNOVIJI I NAJVEĆI SVE DOK LJUDI NISU REKLI ŠTA ZNATE?

OVO NE RADI ZA NAS, TREBA NAM NEŠTO MALO DRUGAČIJE. TREBA NAM NEŠTO ŠTO NIJE SAMO 1.2, TREBA NAM NEŠTO SASVIM DRUGO. TAKO JE DOŠAO HTTP/2

## DA LI NEKO ZNA ŠTA JE HTTP/2?

NEKO JE OVO REKAO:

> DAKLE, OSLANJA SE NA TO DA SSL POSTOJI, MORATE IMATI PODEŠEN HTTPS-A. INAČE JE DEALBREAKER, I KAD TO JEDNOM POSTAVITE, ONDA JE TO PRODUŽETAK GOOGLE-OVE SPD WIRE-A, ODNOSNO [SPEDY PROTOCOL](https://en.wikipedia.org/wiki/SPDY) (ZA KOJIA SAM JA CUO DA JE DEPRECATED)? ALI U OSNOVI HTTP/2 OMOGUĆAVA [MULTIPLEXING](https://en.wikipedia.org/wiki/Multiplexing)

ZATO MI, OPET, OVO PUTOVANJE, PRATIMO OD GLEDANJA HEADER-A I PROVJERE STATUS CODE-OVA, RAZUMIJEMO KAKO IZGLEDA REQUEST I RESPONSE DO DODAVANJA HTTPS-A NA, ZA NAŠU STRANICU

E PA SADA ĆEMO DODATI HTTP/2. 

POŠTO JE JEDAN OD REQUESTA ZA HTTP/2 DA VAM JE OMOGUĆEN SSL. 

OPET NAPOMINJEM, ONI VAS POMALO GURAJU U PRAVOM SMERU. ŽELITE DA KORISTITE NAJNOVIJE I GREATEST TEHNOLOGIJE. MORATE DA IMATE EBCRIPTION IN PLACE

SA HTTP1.1, SVAKI POJEDINAČNI REQUEST IMAO JE SOPSTVENI THREAD, SOPSTVENI PIPE

DAKLE, AKO ŽELIM REQUEST main.js, REQUET JEDAN SMER -  RESPONSE SUPROTAN SMER

ALI ZAPAMTITE, OVO JE SVE PREKO TCP-A, A TCP IMA TAKO DUGI HANDSHAKE, GDE ŠALJE TE SYN PACKETS. A ONDA ŠALJE ACKNOWLAGE PACKETS (ACK). A ONDA ŠALJETE NAZAD SYN/ACK, A ZOVE SE HANDSHAKE, I TO JE ZAISTA NEZGRAPNO (CUMBERSOME)

DAKLE, TO ZNAČI DA ĆE SVAKI RESURS KOJI JA ŽELIM, TREBATI ODVOJENI HANDSHAKE, KOJE ĆE GA USPORITI PO DEFAULTU

SA HTTP/2 MOŽEMO MULTIPLEKSIRATI; MOŽEMO USPOSTAVITI JEDNU KONEKCIJU; TADA MOŽEMO REQUEST-OVATI SVE PREKO LARGER PIPEA.

*TO JE POZNATO KAO MULTIPLEKSIRANJE*. *KORIŠĆENJE JEDNE KONEKCIJE I OBAVLJANJE VIŠE STVARI U OKVIRU JEDNE KONEKCIJE*

SVAKI PUT KADA ŽELIM dog.PNG, index.html, RADIMO TAJ HANDSHAKE. ŠTO IZAZIVA PREKOMERNE TROŠKOVE (OVERHEAD) I POVEĆAVA SAMO KOLIČINU PODATAKA KOJA SE KORISTI. 

A SADA MOŽEMO SAMO DA URADIMO SA JEDNOM KONEKCIJOM

THA SAID, POSTOJI OGRANIČENJE BROJA KONEKCIJA KOJE MOŽEMO USPOSTAVITI

A TO UVELIKO ZAVISI OD RAČUNARA. DODAO BIH DODATNU NAPOMENU, OVO JE SAMO NERD TRIVIA, I MISLIM DA JE U STVARI DESET KONEKCIJA.

LJUDI SU TO URADILI, MISLIM DA TO ZAVISI OD PREGLEDAČA I RAČUNARA, AND STUFF LIKE THAT

NEKO RECE: VEĆINA PREGLEDAČA JE OGRANIČENA NA ŠEST KONEKCIJA PO DOMENU.

MISLIO SAM DA JE DESET.

PROMENILO SE, NEKADA JE BILO ŠEST

ZAVISI OD VAŠEG PREGLEDAČA UGLAVNOM

DA, ALI OVO NIJE KAO SILVER BULLET. OVO NIJE, "MOGU DA USPOSTAVIM JEDNU VEZU I SVE PROĐE KROZ TO". POSTOJI MAKSIMALNA KOLIČINA KONEKCIJA KOJE MOŽETE USPOSTAVITI PO VEZI

DAKLE, TO ĆE UGLAVNOM BITI ADD NETWORKS, SAMO ĆETE VIDETI NIZ REQUESTA, TO ĆE BITI VIŠE KONEKCIJA. DAKLE, HTTP/2 NIJE TA MAGIČNA STVAR, ALI IPAK, SAMO SE OTARASITE TOG STISKANJA RUKE, KADA GOVORITE O NEČEMU ŠTO SE DOGAĐA, ŠTA JE VEĆE OD BILIONA? KUADRILLION PUTA.

KVADRIJUN, GOVORIMO O KVADRILIJAMA REQUESTA, REŠAVAJUĆI SE OVOG RUKOVANJA SVAKI PUT, ŠTEDITE PUNO VREMENA I ENERGIJE I SAMO UBRZAVATE INTERNET. DAKLE, DODAJMO HTTP/2

## OVO JE JOŠ LAKŠA POSTAVKA CERTBOT-A; U NAŠOJ KONFIGURACIJI Nginx, SAMO DODAJTE HTTP/2 IZMEĐU 443 I SSL DELA

- sudo vi /etc/nginx/sites-available/default

OVAKO

TRAZI U VIMU GDE JE 443; TAKO CES LAKSE NACI

KAKO SE TRAZI U VIM-U? **SLASH** JE FUND COMMAND; TI KUCAS **/443**

*PRIMETIO SAM DA OVIH POZICIJA SA 443 IMA VISE U CELOM OVOK KONFIGURACIJSKOM FAJLU*

OVDE JE JEM STAVIO (OSTAVIO SAM NEKE BEZVEZNE STAVRI OKOL ODA BI SLEDECI PUT MOGAO DA SE ORIENTISES, JER MENI NIJE JASN OSVE OVO SA ITIM STVARIMA NA RAZLICITIM MESTIMA, A MOZDA CU UKAPIRATI)

```linux
        #
        #location ~ /\.ht {
        #       deny all;
        #}

    listen [::]:443 http2 ssl; # managed by Certbot                                             %%%%  ** OVDE **
    listen 443 http2 ssl; # managed by Certbot                                                  $$$$  ** OVDE **
    ssl_certificate /etc/letsencrypt/live/raedal.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/raedal.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}


# Virtual Host configuration for example.com
#
# You can move that to a different file under sites-available/ and symlink that
 that
# to sites-enabled/ to enable it.
#
#server {
#       listen 80;
#       listen [::]:80;
```

VIDIS GORE GDE SAM DODAO **http2** NA DVA MESTA, IZMEDJU 443 I ssl

WRITE-UJEM I QUIT-UJEM

- :wq

## SADA MORAM RELOAD-OVATI Nginx

- sudo service nginx reload

## AND LET'S TEST OUR SITE

RELOAD-UJ STRANICU

TI VEROVATNO NE PRIMECUJES RAZLIKU, ALI

ALI AKO UĐETE U INSPECTOR U BILO KOJEM PREGLEDAČU KOJI KORISTITE

KONKRETNO U CHROME-U URADITE PRVO U NETWORK TAB-U SLEDECE:

DESNI KLIK NA KOLONE I TAMO ENABLE-UJTE Protocol KOLONU, KAKO BI ONA BILA VIDLJIVA

**U NETWORK TABU, KADA VIDITE NETWORK REQUEST, ON SADA IMA I Protocol KOLONU, A ZA REQUEST, MOŽETE U POMENUTOJ KOLONI VIDETI h2.**

TO SAMO ZNAČI DA SADA KORISTITE HTTP/2 PROTOKOL

## I MISLIM DA POSTOJI I DOBAR DEMO

 OVO NEMA VEZE S TVOJIM SAJTOM, SAMO DEMONSTRACIJA, KAKO JE HTTP/2 BRZI OD HTTP/1)

<https://http2.akamai.com/demo>

OVO JE SAMO AKAMAI DEMONSTRACIJA, KOJA POKAZUJE RAZLIKU IZMEĐU HTTP/1 I HTTP/2.

VIDITE TO ZAISTA SA VELIKIM SLIKAMA, PA ZBOG TOG MULTIPLEXING-A MOGU REQUEST-OVATI SLIKU. I SAMO ŠALJE KOMAD PREKO JEDNE CEVI. A ZATO ŠTO NE RADI, ONAJ HANDSHAKE, TO JE MNOGO BRŽE. TO VIDITE PRVENSTVENO U KORIST VELIKIH FAJLOVA KOJE ŠALJETE. NISU TOLIKO BITNI MALI FAJLOVI, ALI PRETVORITI HTTP/2, TOLIKO JE BEZBOLNO I LAKO

NE ŠKODI

UOPŠTE NIJE LOŠE. TO JE BILO PRILIČNO JEDNOSTAVNO KOLIKO MOŽEMO DA SHVATIMO. TO JE BILO PRILIČNO LAKO. NE KAŽEM TO ČESTO, ALI TO JE BILO PRILIČNO LAKO, ZAR NE? 

## DRUGI BENEFIT USING-A HTTP/2, OSIM MULTIPLEKSIRANJA, JESTE I NEŠTO ŠTO SE NAZIVA **HPACK**

HPACK JE COMPRESSION ALGORITAM

AKO POSMATRAM HEADER-E MOGU RECI DA VEĆINA NJIH JE ISTA

MOJ User-Agent UGLAVNOM SE NEĆE ČAROBNO MENJATI IZMEĐU REQUESTA I RESPONSE-A i NEĆE SE MENJATI OVER TIME

MOJI Accept-OVI SE NEĆE PROMENITI, MOJ Accept-Language SE NEĆE PROMENITI

DAKLE, ONO ŠTO RADI ALGORITAM KOMPRESIJE HPACK JE DA UZIMA SVE TE HEADERS, KOMPRIMIRA IH U HASH. I SAMO IH UPOREĐUJE TOKOM VREMENA. TA POREĐENJA DAJU NAM OKO 30, 40% UBRZAVANJA. JER UMESTO SLANJA OVIH HEADERS SVAKI PUT, ON IH MOŽE SAMO COMPRESS DOWN I ZATIM READ THEM AT WILL

TO JE ZAISTA MOĆNO I TO JE PORED MULTIPLEKSIRANJA VEROVATNO SEKUNDARNA, NAJMOĆNIJA PREDNOST KORIŠĆENJA HTTP/2

TO JE DRUGA]I SPEED UP KOJI POSTIŽEMO, KOMPRIMIRANJEM TIH HEADERS. 

**ALI ZAPAMTITE, KOLAČIĆI SE NE MOGU GENERALNO KOMPRESOVATI**

MOŽEŠ, ALI VJEROVATNO NEĆE HTETI. BUDUĆI DA SE KOLAČIĆI S VREMENOM MENJAJU, DINAMIČNIJI SU.

DAKLE, AKO POŠALJETE VELIKI PAYLOAD KOLAČIĆA, HTTP 2 VAM NEĆE MNOGO POMOĆI. ŽELITE DA UMANJITE KOLIČINU KOLAČIĆA KOJE ŠALJETE

