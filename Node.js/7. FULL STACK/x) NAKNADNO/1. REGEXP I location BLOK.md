# ZASTO BI SE REGEXP KORISTIO ZA location BLOK

******

NECU DA SE PREVISE UKOPAVAM U NGINX

OVDE SAMO POKAZUJEM NESTO DO CEGA SAM DOSAO STA BI NA PRIMER MENI MOGLO KORISTITI DA USPESNO RUNN-UJEM EXPRESS APLIKACIJU, ODNOSNO BIL OSTA GDE IMAM DINAMICNE ROUTE-OVE

**OBAVEZNO SAGLEDAJ ONAJ TUTORIAL KOJI SU UZEO A TICE SE SAMO KONFIGURIRANJA NGINX-A**

******

PA STA AKO PATH REQUEST-A IMA USER ID, ILI NEKI DRUGI ID

ILI ID POST-A, KOJI SE REQUEST-UJE

NE MOZES TRAZITI SAMO EXACT MATCHING, VEC CES DEFINISATI REGEXP MATCHING

STO SE TICE OBJASNJENJA, KOJE JE DETALJNIJE, PRONASAO SAM GA OVDE:

<https://www.digitalocean.com/community/tutorials/understanding-nginx-server-and-location-block-selection-algorithms#matching-location-blocks>

**ONO STO JA MOGU DA ZAKLJUCIM SA NEKI MSAZNANJIMA OD RANIJE JESTE DA JE REGEXP SPOR, ODNOSNO DA NEKI KOMPLIKOVANIJI REGEXP SIGURNO PREDSTAVLJA NESTO STO MOZE OSLABITI PERFORMANCE**

*I ONO STO SAM MOGA OVIDETI JESTE DA SE NE UPOTREBLJAVAJU NEKI KOMPLIKOVANI REGEXP-OVI ZA location BLOK*

## NECU MNOGO PRICATI O OVOME, VEC PREDSTAVITI JEDAN PRIMER, KOJI BI MOZDA BIO I PRAKTICNIJI

EVO MODIFIKOVACU NGINX KONFIGURACIJU, KAKO BI OPET DEFINISAO JEDAN location BLOK, ALI KORISTICU REGEXP U NJEMU

```linux
location ~ ^/vicarious/(.*)/(\d+)$ {
        proxy_pass http://127.0.0.1:4600/$1/$2;
}
```

**~** POSTOJI JOS OVIH OZNAKA, SA KOJIMA SE MOZES UPOZNATI KASNIJE, ALI OVA KONKRETNO ZNACI:

>> If a tilde modifier is present, this location will be interpreted as a case-sensitive regular expression match.

NECU INTERPRETIRATI GONJE REGEXP-OVE, JER BI TREBAL ODA SU JASNI

**ALI ONO STO JE INTERESANTNO JESTE DA SAM GORE KORISTIO MULTIPLE MATCHES (TO TI JE ONO STO JE OGRANICENO ZAGRADAMA)**

UPRAVO MI TO DAJE MOGUCNOST DA TE MATCHEVE KORISTIM KAO VARIJABLE, KOJE MOGU ONDA DA APPEND-UJEM NA LOCALHOST-A (**I NA TAJ NACIN NODE APLIKACIJA, ODNSNO NODE SERVER, ILI EXPRESS SERVER, MOZE DA IMA PATH, KOJ IJE SAGRADJEN OD DELOVA location PATHA**)

DAKLE ZATO SE MOGU DELOVI location-OVOG PATH-A KORITITI KAO VARIJABLE

- $1 ILI $2 ...

U GORNJEM SLUCAJU IMAM SAMO DVE

JEDNA ODGOVARA

- (.*)

A DRUGA

- (/d+)

### DODACU SADA I CODE NODE APLIKACIJE, ODNOSNO SERVER, KOJI SLUSA NA PORTU 4600

******

digresija:

*NODE SERVER NEMA POJMA KOJI PATH ODREDJUJE location BLOK* (TO TREBA DA TI BUDE JASNO IZ ONGA GORE STA SAM VEC NAPISAO)

******

```javascript
const express = require('express')

const app = express()

// EVO, AKO JE POSLAT REQUEST ZA PRAVI PATH
// OVAJ SERVER BI TREBALO DA HANDLEUJE REQUEST, ZA PATH

//          '/:rec/:broj'

// PO OVOME JE KAO STO ZNAM EXPRESS SJAJSAN, ZBOG OVIH PARAMETARA U PATH-U

app.get('/:rec/:broj', (req, res) => {

  // NARAVNO, OVDE BI IZVRSIO NEKI QUERYING U BAZU PODATKA ,AL ISADA SAMO SALJEM NAZAD ONOS TO SAM DOBIO
  // KAK OBI VIDEO DA SAM OVO DOBRO RAZUMEO

  res.status(200).send(`VICARIOUS: ${req.params.rec} -------- ${req.params.broj}`)

})

app.listen(4600, () => {
  console.log('listening on 4600')
})
```

### SADA KADA STARTUJES OVAJ SERVER I KADA RELOAD-UJES NGINX, POSALJI JEDAN REQUEST SA NA PRIMER OVAKVIM PATH-OM

ODNOSN OSAMO APPENDUJ, NA URL TVOG WEBSITE SLEDECE

'vicarious/blah/8888'

ON OSTO CES DOBITI JE OVO

`VICARIOUS: blah -------- 8888`

DAKLE DOBRO SAM RAZUMEO SVE

## :one: ON OSTO SAM REKAO JESTE DA CU SE BOLJE UPOZNATI SA NGINX KONFIGURACIJOM