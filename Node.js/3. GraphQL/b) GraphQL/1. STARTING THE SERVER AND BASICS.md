# BASICS I STRARTOVANJE SERVER-A

******

SVE STO SE TICE REPO-A, MOZES VIDETI IZ VIDEO-A, KOJI SE NALAZI NA KRAJ UPRVOG FOLDER-A

napomena: POGLEDAJ NJEGOV SETTINGS U REPO-U (MISLIM NA LINTING, NA BABEL, NA SCRIPTS, TESTOVE, NA KORISCENJE ENVIROMENT VARIJABLI) (ZATO STO JE ODLICAN, POPUT ONOG U REST KURSU)

MOZES I OGLEDATI NA RAVNO KOJE PAKETE KORISTITI (POGLEDAJ package.json)

******

DAKLE OVDE CU PRATITI LIVE CODING AUTOR-A WORKSHOPA I BELEZITI, ODNOSNO KOMENTARISATI NEKE STVARI KOJE CE ON KORISTITI

U SUSTINI IDEM U **src** FOLDER, U KOJE MSE NALAZI FAJL:

CISTO NAPOMINJEM DA SE KORISTI BABEL I ZATO KORISTIM ESM

*server.js*

```javascript
// PRVO STO CES VIDETI DA JE UVEZENO JESTE APPOLO SERVER
import { AppoloServer } from 'appolo-server'

// APPOLO JE USTVARI PROIZVOD ISTIH KREATORA KOJI SU KREIRALI METEOR (NE ZNAM MNOGO O METEORU)
// A USTVARI ONO STO PREDSTAVLJA APPOLO SEVER, JESTE WHOLE BUNCH OF TOOLING, I BUNCH OF PRODUCTS
// KOJI SE KORISTE AROUND GraphQL

// APPOLO SERVER USTVARI PREDSTAVLJA APPOLO IMPLEMENTACIJU KREIRANJA GRAPHQL SERVER-A

// DAKLE ON CE RADITI STVARI ZA MENE, MADA POSTOJE I JOS NEKIH PAKETA KOJI SU POPUT APPOLO SERVER-A
// ALI POSTO SCOTT MOSS KORISTI BAS APPOLO SERVER, I JA CU GA KORISTITI

// OVE SLEDECE STVARI PREDSTAVLJAJ STVARI USTVARI KOJE CU KORISTITI TOKOM OVOG WORKSHOPA
// U PITANJU SU SCHENMA I RESOLVERI I OSTALO
// NECU DODATNO PRICATI OVDE O NJIMA VEC KADA BUDEM JA RADIO PRIMER, ONDA CU DAVATI DODATNA OBJASNJENJA

import { loadTypeSchema } from './utils/schema'
import { authenticate } from './utils/auth'
import { merge } from 'lodash'
import config from './config'
import { connect } from './db'
import product from './types/product/product.resolvers'
import coupon from './types/coupon/coupon.resolvers'
import user from './types/user/user.resolvers'


const types = ['product', 'coupon', 'user']


// OVO JE FUNKCIJA KOJOM CE SE STARTOVATI SERVER

export const start = async () => {

  // OVDE MOZES VIDETI NESTO STO SE ZOVE ROOT SCHEMA

    //  - ROOT SCHEMA CE U SUSTINI BITI TVOJA ENTRY SCHEMA
    //      PRVI DEO TVOJE SCHEMA-E

    // AKO RAZMISLJAS O SCHEMA-I, KAO O GRAPH-U, KAO O TREE-JU, ****    MORA POSTOJATI ROOT    *****
    // I POMENUTO JE ROOT, ODNOSNO ENTRY POINT TO MY SCHEMA

  const rootSchema = `
    schema {
      query: Query
      mutation: Mutation
    }
  `
  const schemaTypes = await Promise.all(types.map(loadTypeSchema))

  // A MOZES VIDETI I GDE SAM STARTOVAO APPOLO SERVER

  const server = new ApolloServer({
    typeDefs: [rootSchema, ...schemaTypes],
    resolvers: merge({}, product, coupon, user),
    async context({ req }) {
      const user = await authenticate(req)
      return { user }
    }
  })

  await connect(config.dbUrl)
  const { url } = await server.listen({ port: config.port })

  console.log(`GQL server ready at ${url}`)
}

```

## POCECU OD SAME ROOT SCHEMA-E

KAKO AUTOR WORKSHOPA KAZE, GRAPHQL JE KAO TYPESCRIPT ZA MOJ API; ON JE POPUT TYPING INTERFACE-A

ONO STO CU SADA ODMAH URADITI JESTE DA CU KRIRATI NOVI TYPE,  IDESCRIBE-OVATI HOW IT LOOKS LIKE