# KAKO FUNKCIONISU PUSH NOTIFIKACIJE

PA ONE SE SASTOJE IZ DVA DELA

- SERVEROV PUSHING NECEGA MOJOJ APLIKACIJI

- I NOTIFICATION, ODNOSNO ONO STO SE PRIKAZUJE USER-U AT THE END

ONO CIME CU SE BAVITI, JESU OBE POMENUTE STVARI, I BAVICU SE TIME KAKO DA IH KONEKTUJEM

## DA PRVO KAZEM DA JE POTREBNO DA PRVO KORISNIK ENABLE-UJE NOTIFICATIONS

DAKLE MORAM PROMPT-OVATI KORISNIKA ZA PREMISSION, JER U SUPROTNOM, NECE MOCI BITI PRIKAZANE, NIKAKVE NOTIFIKACIJE, I NECE SE MOCI SLATI PUSH MESSAGES, SA BILO KOG SERVERA, DO APLIKACIJE

PROMPTING JE ONE TIME TASK

KADA ENABLE-UJE, KORISNIK KASNIJE MOZE DISABLE-OVATI POMENUTO, KROZ BROWSER TOOLS-E

## KLJUCNA REC KADA POSMATRAM PUSH DEO JESTE WORD SUBSCRIPTION

ONA SE U OVOM KONTEKSTU ODNOSI NA BROWSER I NA UREDJAJ, JER AKO NA PRIMER NA JEDNOM TELEFONU IMAM NEKOLIKO BROWSER-A, JASNO JE DA CE SVAKI BROWSER PREDSTAVLJATI SUBSCRIPTION AKO SU U NJIMA DOZVOLJENE NOTIFIKACIJE, ALI  MOZA JE NA NEKOM BROWSER-U DOZVOLJENE A NA NEKOM NISU DOZVOLJENE NOTIFICATION-I

U JAVASCRIPTU PROVERAVAM DA LI JE KORISNIK MOZDA SET-OVAO SUBSCRIPTION U PROSLOSTI

AKO JE SLUCAJ DA NIJE, JA MOGU KREIRATI NOVI SUBSCRIPTION

DAKLE NOVI SUBSCRIPTION SE KREIRA U JAVASCRIPT-U, SA SERVICE WORKER-OM

## MEDJUTIM MENI SU POTREBNI EXTERNAL SERVERI

ZATO STO SE PUSH NOTIFICATION DELIVER-UJU DO MOJE APLIKACIJE

DA NEMA SERVERA, KAD BI APP, ODNOSNO BROWSER, BILI ZATVORENI, ONDA NE BI BILO MOGUCE DA KORISNIK VUIDI NOTIFIKACIJU, ODNOSN OONA NE BI IMALA MOGUCNOST DA BUDE SENT

## SVAKI VENDOR, ODNOSNO SVAKI BROWSER IMA SVOJ PUSH SERVER

GOOGLE IMA SVOJ SERVER KOJI HANDLE-UJE PUSH MESSAGES, A I MOZILA IMA SVOJ

OVE SERVERE NE KONFIGURSEM I JA IH NE OWN-UJEM (JASNO JE KO IH OWN-UJE)

SVAKI PUT KADA KREIRAM SUBSCRIPTION U JAVASCRIPTU, JAVASCRIPT CE REACH OUT DO TOG PUSH SERVER-A, I FETCH-OVACE PUSH API ENDPOINT

**TAJ ENDPOINT JESTE, JEDNOSTAVNO URL, KOJEM CU JA MOCI DA SALJEM PUSH MESSAGES, A ONDA CE BROWSER-OV SERVICE FORWARD-OVATI NJIH DO MOG WEB APP-A**

**NEWLLY CREATED SUBSCRIPTION CUVA POMENUTU INFORMACIJU (PUSH API ENDPOINT), I TAKODJE HOLDS SOME AUTHETICATION, KAKO BI BILO SIGURN ODA SAMO JA MOGU PUSH-OVATI MOJOJ WEB APLIKACIJI**

IZMEDJU OSTALOGA JA CU NAUCITI, KAKO DA PROTERCT-UJEM I PASS-UJEM ADDITIONAL AUTHENTICATION DO SUBSCRIPTION-A, KAKO BI BILO SIGURNO DA SAMO JA SMEM DA PUSH-UJEM, ODNOSNO DA IAKO NEKO DRUGI PRONADJE ENDPOINT MORA BITI SIGURNO DA ON NE SME DA POCNE DA PUSH-UJE MESSAGES

## PORED OVOG SERVERA, KOJI JE U VLASNISTVU VENDOR-A, MENI JE POTREBAN I MOJ SOPSTVENI

OVO MOZE BITI ISTI SERVER, KOJI SERVE-UJE MOJ WEB APP, ODNOSNO MOJE FAJLOVE

ALI TO MOZE BITI I DRUGI SERVER

**UGLAVNOM POTREBAN MI JE SERVER GDE JA RUNN-UJEM MOJ CODE**

TO JE ZATO STO CU KREIRATI, MOJ SERVICE WORKER, KOJI CE ONDA BITI U MOGUCNOSTI DA SALJHE CREATED SUBSCRIPTION, MOM BACKEDND SERVER-U, KAKO BI POMENUTO BILO STORED TAMO

ZASTO GA STORE-OVATI NA SERVERU?

AKO BI BILO STORED U MOM WEB APP, NE BIH MOGAO REWORK-OVATI WITH IT (BIL OBI LOST KADA SE ZATVORI WEB APP)

MOGLO BI BITI STORED U INDEXED DETABASE-U, ALI ON NIJE PERSISTENT STORAGE

DAKLE POMENUTO STORE-UJEM NA MOM SERVERU, JER CU KASNIJE SA TOG MOG BACKEND SERVER-A ZELETI DA PUSH-UJEM MESSAGES TO THE FRONT

EVO IDEJA:

KORISNIK INICIJALIZUJE POST REQUEST, I DATA SE STORE-UJE NA MOM SERVERU, I KADA SE POST-OVI STORE-UJU NA MOM WEB SERVERU, MOGU DEFINISATI DA SE ONI SALJU SVIM DRUGI MSUBSCRIPTION-IMA 

**DAKLE IMAJ NA UMU DA KADA GOVORIM O SUBSCRIPTION-U, GOVORIM O BROWSER-DEVICE COMBINATION-U**

AKO IMAM 10 KORISNIKA NA RAZLICITIM UREDJAJIMA I RAZLICITIM BROWSERIMA, IMAO BIH 10 SUBSCRIPTION-A

NJIH SVE BIH MOGAO INFORMISATI O NOVOM POST-U

I TO RADIM SA MOG BACKEND SERVER-A

ODNOSNO ONADA CE PUSH BITI POSLAT VENDOR SERVERU, ODNOSNO API ENDPOINTU, KOJI JE STORED IN THE SUBSCRIPTION-U

SA PORUKOM JE POSLATAI NEKA AUTETIFIKACIJA, DA BIH TAJ ENDPOINT BIO SIGURAN

BROWSEROV PUSH SERVER ONDA DELIVER-UJE MESSAGE DO CLIENT-A

PRECIZNIJE RECENO, DELIVER-UJE GA DO SERVICE WORKER-A

## KADA VEDNOR SERVER, POSALJE PUSH MESSAGE, ONDA SE U SERVICE WORKER-U TRIGGER-UJE push EVENT

DAKLE, JA U OBIMU SERVICE WORKERA, MOGU SLUSATI NA **push** EVENT

I U OBIMU onpush EVENT HANDLER-A, JA MOGU EXECUTE-OVATI DISPLAYING TOG NOTIFICATION-A, ZA SLUCAJ MOJE WEB APLIKACIJE

## U SLEDECIM FAJLOVIMA CU OBJASNITI STEP BY STEP, SVAKU FAZU PO NA OSOB