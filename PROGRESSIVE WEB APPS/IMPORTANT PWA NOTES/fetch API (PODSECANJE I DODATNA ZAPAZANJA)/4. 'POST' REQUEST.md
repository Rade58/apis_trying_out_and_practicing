# 'POST' REQUEST

ZA POCETAK CU RECI DA I 'POST' REQUEST DEFINISEM, ZADAJUCI CUSTOM REQUEST (ODNOSNO DEFINISUCI init OBJEKAT ARGUMENT, fetch POZIVANJA)

KAKO DA NAJBOLJE PROVEZBAM OVAJ REQUEST, DEFINISACU PRIMER IZ [GOOGLE CODELAB-A](https://developers.google.com/web/ilt/pwa/lab-fetch-api#6_using_post_requests)

TAJ PRIMER JE PRIMER, KOJI JE KORISCEN TOKOM OBJASNJAVANJA, SVIH ODLIKA fetch-A

A ZA POTREBE POST REQUEST-A, POTREBNO JE PODESITI NODE SERVER (ODNOSNO TO JE NEKI **ECHO SERVER**)

NECU NISTA O TOME GOVORITI, JER TAMO SVE PISE

DAKLE,

**SAMO CU RECI DA CU TADA IMATI SITUACIJU DA MOJ SAJT SERVIRAM, PREKO**

- http://localhost:8081/

**A ON OSTO SAM MORAO URADITI JESTE ISTOVREMENO STARTOVATI ECHO SERVER (OTVORITI NOVI POWER SHELL I TAMO KUCATI KOMANDU), KOJI JE VEC PRIPREMELJEN, I ON CE SE SERVE-OVATI PREKO**

- http://localhost:5000/

UPRAVO TOM SERVERU CU DA SALJEM POST RQUEST, A STARTUJEM GA TAK OSTO KUCAM KOMANDU: **node echo-servers/cors-server.js** (POSTOJI I no-cors SERVER, KOJI MCU SE POZABAVITI KASNIJE)

TA JECHO SERVER USTVARI NE RADI NISTA (SAMO CE POST REQUEST BITI USPESAN, KADA GA KORISTIMC (STO MI JE BITNO))

## QUERYSTRING KAO VREDNOST body PROPERTIJA init ARGUMENTA

OVDE NECU PONOVO PARAVITI PODSECANJE NA QUERYSTRING, JER MISLIM DA JE SASVIM JASAN (ZANIMAJU ME KONKRETNO DRUGACIJI NACINI, KOJI SE KORISTE U FORMIRANJU TOG KVERISTRING-A)

DAKLE OVDE CU ODMAH DEFINISATI PRIMER

U SUSTINI, PRISUTAN JE FORMULAR, I NJEGOVI PODACI TREBA DA UCESTVUJU U FORMIRANJU KVERISTRING-A

```HTML
<input type="text" id="name" name="name">
<textarea id="msg" name="message"></textarea>
<!-- BUTTON NIJE TIPA SUBMIT, JER NECU DA SUBMIT-UJEM NISTA DIREKTNO IZ HTML-A ,JER ZELI MDA KORISTIM fetch -->
<button id="post-btn" type="button">POST request</button>
```

KEY-OVI QUERYSTRING-A, U OVOM PRIMERU JESU **name** I **message**

**I ON OSTO MI JE NAJBITNIJE JESTE CINJENICA, DA JA MOGU U init OBJEKTU, DEFINISATI KVERI STRING, TAKO STO CU UPOTREBITI init-OV PROPERTI:**

- **body**

**body** *SU USTVARI PODACI KOJE ZELIM DA POSALJEM**

```javascript
// DA PRVO ACCESS-UJEM SVIM ELEMENTIMA
const inputEl = document.querySelector('input[name=name]');
const textareaEl = document.querySelector('textarea[name=message]');
const btn = document.querySelector('button#post-btn');

// NARAVNO REQUEST TREBA DA SE POSALJE, KLIKOM NA DUGME

btn.addEventListener('mousedown', function(ev){
    // CITAM VREDNOSTI INPUTA I TEXTAREA-E
    const inputVal = inputEl.value;
    const textareaVal = textareaEl.value;
    // CITAM I VREDNOSTI NJIHOVIH       name        ATRIBUTA
    const inputName = inputEl.name;
    const textareaName = textareaEl.name;


    // SLANJE POST REQUEST-A

    fetch('http://localhost:5000/', {             // ZADAJEM I init ARGUMENT
        method: 'POST',
        body: `${inputName}=${inputVal}&${textareaName}=${textareaVal}`    // MOGU KORISTITI TEMPLATE LITERAL ZA FORMIRANJE KVERISTRINGA
    })
    .then(function(response){
        // AKO JE USPESAN POST REQUEST
        return response.text();

    })
    .then(function(data){
        console.log(data);      // STAMPACU STA JE PROCITANO IZ body-JA
                                // TO CE BITI STRING JEDNOG OBJEKTA, A S NJIM I KVERISTRING KOJI SAM POSLAO SERVERU
    })
    .catch(function(err){
        console.log('bad request, wrong fetch arguments and blah blah...', err);
    })
})

```

## VAZNE BELESKE O POST REQUEST-U

> Note: In production, remember to always encrypt any sensitive user data.

## 'POST' method :seedling: (NEPOTPUNO) (NE OBRACAJ PAZNJU NA OVO ZA SADA)

**AKO ZELIM OVOG DA SE PODSETIM, TREBAM U MOM WORD DOKUMENTU, KUCATI querystring U SEARCHU**
**TAMO SAM DEFINISAO PRIMER U KOJEM SAM KORISTIO OVU METODU**
**ALI IMAM I PRIMER U KOJEM KORISTIM KVERISTRING, DA BIH SAMO GET-OVAO NEKE PODATKE**

PO DEFAULTU 'GET' JESTE method KOJI SE KORISTI PRI PODNOSENJU NETWORK REQUESTA, KADA SE KORISTI fetch METODA, A SADA CU SE POZABAVITI

'POST'-OM

NJEGA PODESAVAM, UZ POMOC DRUGOG ARGUMENTA Request KONSTRUKTORA

- PRVI ARGUMENT JESTE url

- A DRUGI ARGUMENT, (O KOJEM SADA ZELI MDA GOVORIM) JESTE **init OBJEKAT**

TO JE JEDAN OPTIONS OBJEKAT, KOJI MI IZMEDJU OSTALOG OMOGUCAVA DA DEFINISEM I method REQUEST-A

OPET CU KORISTITI JEDAN DRUGI REST API PRACTICE SERVIS, KAKO BI NA NJABOLJI NACIN PRIKAZAO JEDAN **'POST'** REQUEST

```javascript
let url = 'https://www.w3schools.com/xml/getcustomer.asp';

let query_string_keys = ['fname', 'lname'];


let headersObjekat = new Headers([['Content-Type', 'text/xml']]);

let initObjekat = {method: 'POST', headers: headersObjekat, mode: 'cors'};

let requestInstanca = new Request(
    url + '?' + query_string_keys[0] + "=" + "Randy",
    initObjekat
);

fetch(requestInstanca)
.then(function(response){
    console.log(response)
})

```

~**NISAM ZAVRSIO S OVIM, VRATICU SE JEDNOM PRILIKOM KAKO BI SE POZABAVIO, SVI MSTVARIMA VEZANIM ZA Request, I OSTALE STVARI**~