# SERVICE WORKER-I

> Service workers essentially act as proxy servers that sit between web applications, the browser, and the network (when available).

TAKO PISE NA [MOZIILLA DEV](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)

IZMEDJU OSTALOG NAMENJENI SU ZA:

- KREIRANJE EFEKTIVNIH OFFLINE EXPERIENCE-A

- INTERCEPTING ("PRESECANJE", ODNOSNO PRAVILNIJE BI BILO RECI **PRESRETANJE**) NETWORK REQUEST-OVA

- TAKING APPROPRIATE ACTION-A, U ODNOSU NA TO DA LI JE NETWORK DOSTUPAN ILI NE

- UPDATE-OVANJE ASSET-OVA ("SREDSTAVA"), KOJI RESIDE-UJU ON THE SERVER

A OMOGUCUJU ACCESS:

- [PUSH NOTIFICATION-IMA](https://developers.google.com/web/fundamentals/push-notifications/)

- [BACKGROUND SYNC](https://developers.google.com/web/updates/2015/12/background-sync) API-U

NA [MOZZILA DEV](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers) I NA [GOOGLE DEV](https://developers.google.com/web/fundamentals/primers/service-workers/) MOGU SAZNATI VISE O NJIMA

**U BUDUCNOSTI SERVICE WORKER-I CE MOZDA PODRZATI**

1. [periodic sync](https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/periodicSync)

2. geofencing

> Geofencing is a service that triggers an action when a device enters a set location. Coupons, notifications, engagement features, security alerts â€” businesses are finding creative ways to make use of these virtual boundaries.

## OFFLINE FIRST

[OFFLINE FIRST](http://offlinefirst.org/) JE ODLICNA WEB STRANICA, KOJA SE BAVI OFFLINE EXPERIENCEM

ODNOSNO KAKO U DEVELOPMENTU POSTOJE PRINICIPI: RESPONSIVE FIRST, ILI MOBILE FIRST, TAKODJE POSTOJI I PRINCIP OFFLINE FIRST

[GIT REPOZITORIJUMI](https://github.com/offlinefirst)

## STVARI, KOJE BI TREBAO ZNATI O SERVICE WORKERIMA

- ONI SU JAVASCRIPT WORKERI, I NEMAJU, DIREKTNI ACCESS DOM-U

- MOGU SLATI PORUKE, UZ POMOC **self.postMessage()** FUNKCIJE

- > SERVICE WORKERS IS programmable network proxy, allowing you to control how network requests from your page are handled.

- TERMINATED JE KADA SE NE KORISTI I RESTARTED, KADA JE POTREBAN, I ZBOG TOGA SE NE MOZES OSLONITI NA GLOBALNO STANJE UNUTAR SERVICE WORKEROVIH **onfetch** I **onmessage** HANDLER-A; I AKO NEKA INFORMACIJA TREBA DA PERSIST (USTRAJE), IZMEDJU RESTART-OVA, KORISTI SE:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[indexedDB API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) KOJEM SERVICE WORKER IMA PRISTUP

- SERVICE WORKER-I, U OGROMNOJ MERI UPOTREBLJAVAJU [Promise-E](https://developers.google.com/web/fundamentals/primers/promises)

## ZIVOTNI CIKLUS SERVICE WORKER-A

1. **INSTALACIJA**

LIFECYCLE, JE U POTPUNOSTI ODVOJEN OD MOJE WEB STRANICE

DA BI GA INSTALIRAO (SERWICE WORKER-A), POTREBNO GA JE REGISTROVATI, U JAVASCRIPT FAJLU, KOJI JE CONNECTED SA MOJIM PAGE-OM

REGISTRACIJA SERVICE WORKERA, CE POKRENUTI NJEGOV KORAK INSTALIRANJA, U BACKGROUND-U STRANICE

TIPICNO, TOKOM INSTALACIJE, JA ZELIM DA CACHE-UJEM, NEKE STATICNE ASSET-OVE

AKO SU SVI FAJLOVI SUCCESSFULLY CACHED, ONDA CE SERVICE WORKER POSTATI INSTALIRAN

AKO BILO KOJI OD FAJLOVA NIJE USPEO DA POSTANE CACHED, OND JE INSTALL KORAK (INSTALL STEP) FAILED, I SERVICE WORKER NECE BITI ACTIVATED (ODNOSNO NECE BITI INSTALIRAN)

AKO SE TO DOGODI, NE TREBAM BRINUTI, JER CE POSTOJATI NOVI ATTEMPT, SLEDECEG PUTA

AKO SE INSTALIRA, TO ZNACI DA IMAS, POMENUTE STATICNE ASSET-OVE, U CACHE-U

2. **AKTIVACIJA**

KADA JE SERVICE WORKER INSTALIRAN, ACTIVATION STEP CE USLEDITI

OVO JE SJAJNA PRILIKA ZA HANDLING MENAGEMENT-A, STARIJIH CACHE-A

NAKON AKTIVACIJE, SERVICE WORKER CE KONTROLISATI SVE STRANICE, KOJE PODPADAJU POD NJEGOV OBIM

AL ISTRANICE, KOJE REGISTRUJU SERVICE WORKER-A, PO PRVI PUT, NECE BITI KONTROLISANE, OD POMENUTOG SERVICE WORKER-A, SVE DOK SE TE STRANICE OPET NE LOAD-UJU

**DVA STANJA, U KOJIMA SERVICE WORKER MOZE BITI KAD JE IN CONTROLL**

- MOZE BITI **TERMINATED**, TO SAVE MEMORY

- MOZE HANDLE-OVATI **'fetch'** (U SLUCAJ UNETWORK REQUEST-A) I **'message'** (U SLUCAJ UDA M USE POSALJE PORUKA) EVENT-OVE

[OVO JE OVER SIMPLIFIED VIZUALIZACIJA ZIVOTNOG CIKLUSA](https://developers.google.com/web/fundamentals/primers/service-workers/images/sw-lifecycle.png)

