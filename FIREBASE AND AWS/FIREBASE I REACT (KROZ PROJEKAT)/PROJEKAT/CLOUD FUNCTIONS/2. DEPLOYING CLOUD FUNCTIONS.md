# DEPLOYING CLOUD FUNKCIJE

RANIJE AK OSE SECAS PRILIKOM DEPLOYMENTA TVOJE APLIKACIJE, TI SI KORISTIO CUSTOM SCRIPT, KOJ ISI COMPOSE-OVAO DA BI DEPLOY-OVAO CEO APP, CLOUD FUNKCIJE, ZATIM RULES KOJE IMAS I LOKALNO U SVOJI MFAJLOVIMA

SCRIPT KOJ ISI COMPOSE-OVAO SASTOJ I SE I OD firebase deploy; A LI I PRE SVEGA SASTOJ ISE OD BUILDINGA REAACT-OVOG PRODUCTIO NCODA UZ POMOC WEBPACK-A

SADA TI NE TREBA TAJ BUILDING, VEC SAMO DEOPLOYING TVOJIH CLOUD FUNKCIJA IZ functions/index.js; I ZA SADA TO JE SAMO JEDNA PROBNA: helloWorld FUNKCIJA, KOAJ TREBA DA POSALJE NAZAD RESPONSE, CIJI BODY SE SASTOJI OD NEKE RECENICE, ODNOSNO STRING-A

DAKLE SADA SAMO RUNN-UJES

- **firebase deploy** (ALI IPAK NECU SAMO TO KORISTITI)

ZASTO?

## firebase deploy CE DEPLOYOVATI I ONO IZ build FOLDERA, I CLOUD FUNKCIJE, I PRAVILA STORAGE-A, I PRAVILA FIRESTOREA

E PA JA SAM SADA SAMO DEFINISAO CLOUD FUNKCIJU,  IZATO SAM OZELIM DA DEPLOY-UJEM ONO IZ functions FOLDERA

**ZATO CU JA SAMO DEPLOY-OVATI JEDAN DEO, A T OSU CLOUD FUNCTIONS**

*ZA TU POTREBU KORISTIM --only FALG*

## DAKLE DEPLOY-UJEM CLUD FUNCTIONS NA SLEDECI NACIN

- **firebase deploy --only functions**

## NAKON DEPLOYMENTA JA CU IMATI CEO URL ZA ENDPOINT DOSTUPAN U TERMINALU

**CEO URL JE DOSTUPAN I U *Functions* SEKCIJI FIREBASE-A**

## A NADOVEZNO NA URL NALZICE SE "/helloWorld"

ZANCI DA IME MOJE FUNKCIJE PREDSTAVLJA I DEO URL-A ENDPOINTA

## TOKOM DEPLOYMENTA FUNKCIJE KINNEY JE PRIMETIO DA JE U PITANJU KREIRANJE Node.js 6 FUNKCIJE (U TERMINALU SE SVE LEPO VIDI ZBOG firebase CLI BIANRY-JA);  A U Node.js 6 NISU PODRZANI NEKI MODERNI FEATURE-I, KAO STO SU async I await, ILI SPREAD OPERATOR

MEDJUTIM KADA SAM JA DEVELOPE-OVAO MOJA APP, Node.js KOJI SE KORISTIO BIO JE Node.js 8; I MORACU DA POGLEDAM, STA TO PODRZAVA U POGLEDU MODERNE SINTAKSE (JA NISAM BACIO POGLED PRILIKOM DEPLOYMENTA CLOUD FUNKCIJE, STA JE PISALO ZA VERZIJU)

SAZNAO SAM DA Node.js 8 PODRZAVA NOVU SINTAKSU

TAKODJE VIDEO SAM DA JE MOJ CLOUD FUNCTION DEPLOYED U JEZIKU Node.js 8

ONO STO JE KINNEY URADIO TADA JESTE DA JE U package.json-U U functions FOLDER-U, POKUSAO DA UPDATE-UJE VERZIJU Node.js-A; JER KAO STO JE REKAO MOGUCE JE DA FIREBASE, KORISTI I DRUGI ENGINE, KOJI PODRZAVA NOVU SINTAKSU

AKO U functions/package.json JESTE SPECIFICIRANA, NEKA DRUGA STARIJA VERZIJA, MOGU TO IZMENITI NA SLEDECI NACIN

functions/package.json

```javascript
{
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase serve --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "8"         // EVO U PITANJU JE OVO, KAO STO VIDIM, IPAK JE OSMICA U PITANJU, KOJA PODRZAVA
                        // MODERNU SINTAKSU
  },
  // DA JE OVDE BILA NEKA DRUGA VERZIJA, STO NIJE SLUCAJ, I NIKAD NECE BITI
  // MOGAO SAM DA SAMO DODAM, GORNJI OBJEKAT, SA "engine" PROPERTIJEM I "8" AS A VALUE
  // JER TOG OBJEKTA, RANIJE NIJE NI BILO (U STARIJOJ VERZIJI FIREBASE-A, KADA SE KORISTIO Node.js 6)
  "dependencies": {
    "firebase-admin": "^8.0.0",
    "firebase-functions": "^3.1.0"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.1.6"
  },
  "private": true
}

```

**JOS JEDNA BITNA STVAR JE DA JE TRENUTNO NAJ MODERNIJA VERZIJA 12 (2019 GODINA) (ALI FIREBASE KORISTI 8, A RANIJE I 6)**

## JEDNA ZANIMLJIVA STVAR VEZANA ZA https FUNKCIJE (KAO STO JE I MOJA helloWorld), JESTE DA JE NJIH MOGUCE TESTIRATI LOKALNO

ALI KAO STO KINNEY KAZE [FEEDBACK LOOP](https://en.wikipedia.org/wiki/Feedback) FOR TESTING CLOUD FUNCTIONS, NIJE BAS TAKO AMAZING

STA JE POD TIME MISLIO?

MISALIO JE DA U SUSTION ONO STO MORAM DA RADIM JESTE

- firebase deploy

PA

- SEE IF IT WORKED (POGLEDAJ DA LI FUNKCIONISE)

AKO NIJE

- ISPRAVLJANJE PA OPET DEPLOY

- I TAKO U KRUG

>> POSTOJI SHELL, ALI IT'S NOT THAT PERFECT

## AKO MOJ URL ENDPOINT-A STAVIM U ADRESS BAR U MOM BROWSER-U; NA SAMOJ STRANICI CE BITI PRIKAZANA ONA RECENICA, KOJ OPET DOLE PRIAKZUJEM

**functions/index.js**

```javascript
const functions = require('firebase-functions');

exports.helloWorld = functions.https.onRequest((request, response) => { 

    response.send("Hello from Firebase!");  //  OVAJ STRING

});

```

DAKLE, TAJ STRING JE SERVED FROM BACKEND API

## U SLEDECEM md FAJLU, BAVICU SE OBJASNJAVANJEM, KAKO DA NAPRAVIM: API Endpoint
