# CLOUD FUNKCIJE

OVO JE NACIN DA SE PISE, HAJDE *DA GA NAZOVEM* 'BACKEND CODE' (KINNEY JA MALO TU BIO IRIONICAN)

DAKLE U PITANJU JE **SERVERLESS** (A TO ZNACI *OTHER PEOPLES SERVERS*)

## SVE DO SADA STO SAM RADIO, BILO JE TO NA CLIENT-U, OSIM SECURITY RULES

DAKLE GOTOVO SVE STO SAM RADIO BILO JE NA CLIENT-U

## SADA CU INSTALIRATI DVA PAKETA A TO SU firebase-admin; ALI OVOG PUTA GA INSTALIRAM LOKALNO; I INSTALIRAM PAKET KOJI SE ZOVE firebase-functions

DAKLE SADA ZELIM DA firebase-admin BUDE BIO ZAVEDEN POD "dependancies" (NE ZNAM ZASTO MI OVAJ PAKET TREBA I LOKALNO I GLOBALNO) U MOM package.json FAJLU; A INSTALIRAM I firebase-functions

INSTALIRAM latest VERZIJE

- npm install firebase-functions@latest firebase-admin@latest --save

SA firebase-admin JA MOGU RADITI ADMINISTRATIVE THINGS WITHOUT SECURITY POLICIES IN PLACE NA BACKEND CODE-U

## STO SE TICE functions/package.json FAJLA, ODNOSNO functions/node_modules; JA TAMO MOGU STAVLJATI STA GOD ZELIM FROM npm; DAKLE KADA SAM RANIJE RUNN-OVAO firebase init, TADA JE SOME OF THE GROUND WORK LAYED OUT IN FRONT OF ME

**STO SE TICE FREE PLAN-A (KOJI JE ISTO PODLOZAN PROMENAMA), SLEDECA STVAR JE MOZDA DOZVOLJENA ILI NIJE**

>>> CALLING THIRD PARTY APIS

- NA PRIMER BILO KOJI GOOGLE API JE FREE, STO JE PRETTY LEGIT (FACIAL RECOGNITION API NA PRIMER)

**MISLIM DA KORISCENJE NEKOG API ZA SLANJE EMAIL-OVA (KOJI NE BI BIO GOOGLE-OV API), USTVAR NE PODPADA POD FREE PLAN** (ALI TO JE PRVI PAYMANT PLAN; STO JE PRILICNO JEFTINO) (DAKLE POSTOJI NEKOLIKO PAYING PLANS)

DAKLE U SUTINI, VAZNO JE DA JA MOGU INSTALIRATI TAMO BILO KOJI npm PAKET (NA PRIMER IMAGE MAGIC FOR RESIZING IMAGES)

**JA CU STO SE TICE MOG CODE KORISTITI SAM OVANILLA JAVASCRIPT**

## VAZNA STVAR JE DA JA MOGU NAPRAVITI API, ODNOSNO MOGU RESPOND-OVATI NA HTTPS REQUESTS; A TAKODJE MOGU SLUSATI NA STVARI KOJE SE DESAVAJU U FIREBASE-U

NA PRIMER "I'M LISTENING TO THIS COLLECTION; AND WHEN DOCUMENTS GETS ADDED, I WANT TO DO THIS"; ILI "WHENEVER DOCUMENTS GETS CHANGED I WANT TO DO, THIS OTHER THING"

AKO NA PRIMER TREBAS DA SORT-UJES INFORMACIJE KOJE SU NA DIFFERENT PALCE-OVIMA MOZES HIPOTETICKI RECI SLEDECE;: "SVAKI PUT KADA USER PROMENI IME, ZELIM DA PRONADJEM SVE POST-OVE, KOJI IMAJU NA SEBI DISPLAY NAME; I TAKODJE PROMENITI I TO"

OBRATI PAZNJU NA OVO

**SVAKI PUT KADA ZELIS DA GETT-UJES USER INFORMATION; MORAO BI DA QUERY-UJES ZA RELATED DOKUMENTOM, STO CE TE KOSTATI QUERY; ILI MOZES DA KADA KORISNIK KREIRA POST DA (JER "KOLIKO CESTO KORISNIK MENJA USERNAME ILI PHOTO, I AKO SE NE DOGODI IMMEDIATELLY TO JE FINE (MOZE SE BATCH-OVATI NA ONCE A WEEK)?") INCLUDE ALL THE USER INFORMATION U POST; I TO JE SADA SAM OJEDAN REQUEST**

DAKLE AKO KORISNIK PROMENI IME, ZA TO MOGU KREIRATI CLOUD FUNCTION I DEFINISATI DA SE STVARI PROMENE, KROZ TO

POMENUTI PRINCIP JE MNOGO BOLJI OD POKUSAJA DA SE SVE URADI ON EVERY SINGLE REQUEST

(OVO MI MALO NIJE JASNO, TREBAO BI MI KONKRETNIJI PRIMER, ODNOSNO TREBAO BI DA VIDIM CODE, JER ONO O CEMU MISLIM JE ON SNAPSHOT, JER AKO PROMENIM NESTO, OPET CE SE DOGODITI REQUEST ZBOG SLUSANJA SNAPSHOT-A (JEDINO PREDPOSTAVLJAM DA SE OVDE MISLILO DA NESTO TREBAM IZOSTAVITI OD SLUSANJA SNASHOTA,  I UPDATE-OVATI TO API-JEM (A DA JE ONDA DATA REQUESTED ONCE NAKON RELOADA (WHEN COMPONENT MOUNTS ) (TU VIDIM NEKU USTEDU U POGLEDU REQUEST-OVA)))

EVO UZM IZA PRIMER BLOGGING PLATFORMU: "MORE PEOPLE ARE READING THAT POST, THAN READING USERS CHANGING HIS USERNAME"

## NAIME CLUD FUNCTION MI OMOGUCAVAJ DA HANDLE-UJEM HTTP REQUESTS; ILI MI OMOGUCAVAJ UDA SLUSAM NA: CHANGES TO FIRESTORE, NEW FILES UPLOADED, NEW USER CREATED TO AUTH SYSTEM

DAKLE ANYTHING ALONG THESE LINES YOU COULD HOOK INTO AND HAVE TRIGGER YOU DOING OTHER STUFF

## JA CU OVDE POCETI OD BUILD IN EXAMPLE-A

POGLEDAJ **functions/index.js**

```javascript
const functions = require('firebase-functions');

// // Create and Deploy Your First Cloud Functions
// // https://firebase.google.com/docs/functions/write-firebase-functions
//

// DA KORISTIM EXPRESS OVO BI MI BILO POPRILICNO FAMILIAR; ALI JA NE KORISTIM
// MEDJUTIM JA NE ZNAM Node.js JOS UVEK

// MEDJUTIM POPRILICNO M IJE SUGESTIVAN CODE

// VIDIM request OBJEKAT I response OBJEKAT

exports.helloWorld = functions.https.onRequest((request, response) => {
    response.send("Hello from Firebase!");
});

```

MOGAO BI DA INTERPRETIRAM CODE
