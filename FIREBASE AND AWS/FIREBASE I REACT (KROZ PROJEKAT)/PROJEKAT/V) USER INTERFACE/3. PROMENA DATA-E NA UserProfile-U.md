# JA, UOPSTE NAMERAVO DA IMPLEMENTIRAM UserProfile KOMPONENTU DA BIH POKAZAO KAK OSE DEFINISU FILE UPLOADS, UZ POMOC JOS JEDNOG FIREBASE-OVOG API-A; ODNOSNO DA POKAZEM, KAKO JE EASY STORING I UPLOADING FAJLOVA NA FIREBASE

VIDEO SAM TAKODJE DA LJUDI KOJI SE SIGNUJU SA EAMIL-OM I PASSWORD-OM, NISU DOVOLJNO PRIVLEGOVANI DA IMAJU displayName, PO DEFAULT-U (ODNOSNO PROBLEMATICNO JE PODESAVANJE, STO SAM I OBJASNIO ZASTO)

TAK ODA ZELIM, I TO DA IM DOZVOLIM

## NESTO KAO SIDE THING, A STA ZELI MDA NAUCIM BAVECI SE SA POMENUTIM JESTE PRAVLJENJE MORE RUKOVANJE SA FIRESTORE-OM, NESTO VISE ABSTRAKTNIJE, JER NE ZELIM STALNO DA PRAVIM, TAKORECI 'PYRAMIDES OF DOOM', SA collection I doc POZIVIMA, ODNOSNO 'CHAIN-OVIMA'

DAKLE USVOJICU ODREDJENI PATTERN KOJI MOGU KORISTITI KADA RADIM SA STVARIMA, KAO STO SU POMENUTE

## STO SE TICE UI, STEVE JE ZAMISLIO SLEDECE DA ZELI IMATI, JOS KAO DEO UserProfile KOMPONENTE:

TO SU INPUT FIELD-OVI

- JEDAN ZA displayName

- TRUGI ZA UPLOAD PROFILE PICTURE

- I SUBMIT DUGME

## DEFINISACU STATE ZA UserProfile KOMPONENTU, A U STATE-U CE SE CUVATI displayName; ALI CU TAKODJE DEFINISATI I REF ZA ONAJ INPUT, KOJI CE BITI file TIPA; PREDPOSTAVLJAM DA CU TAJ REF KORISTITI U NEKOJ KOMPONENTI GDE CE DEFINISATI UPLODING FILE-A U FIREBASE STORAGE, I NJEGOV LINK DODAVATI U FIRESTORE

src/components/UserProfile.jsx

```javascript
import React, {Component} from "react";

// OVDE CE M ITREBATI I auth
import auth from '../firebase';

import firestore from '../firebase';


class UserProfile extends Component {

    // EVO GA STATE
    state = {displayName: ""}

    // ZA SAD JE IMAGE INPUT null
    imageInput = null;

    // ZELIM DA U OVOJ KLASI DEFINISEM I GETTER FUNKCIJU, PRVENSTVENO ONU FUKNCIJU KOJA CE
    // FETCHOVATI uid OD CURRENT USER-A

    get uid(){
        return auth.currentUser.uid;
    }

    // DEFINISACU I GETTER KOJI TREBA DA GETT-UJE     DocumentReference         INSTANCU

    get userRef(){
        // KAO STO VIDIS KORISTIS GORNJI GETTER U OVOME

        return firestore.doc(`users/${this.uid}`)
    }

    // DEFINISACU ONAJ HANDLE CHANGE LISTENER, KOJI SE MOZE KAZITI NA BILO KOJI INPUT
    handleCahnge = ev => {
        const {name, value} = ev.target;

        this.setState({[name]: value})
    }

    // DEFINISACU I HANDLE SUBMIT HANDLER
    // E TU DEFINISEM PROMENU DISPLAY NAME, ODNOSNO SLANJE NOVOG IMENA U DOKUMENT U 'users'
    // KOLEKCIJI

    handleSubmit = ev => {
        ev.preventDefault();

        // CITAM displayName IZ INPUTA, ODNOSNO ONO JE U STATE-U OVE KOMPONENTE

        const {displayName} = this.state;

        // PROVERAVAM DA LI IMAM NOVO DISPLAY IME
        // DAKLE, AKO JE KORISNIK BIL OSTA UNEO U INPUT JA CU IMATI NOVO IME

        if(displayName){
            // KORISTIM GETTER
         // this.userRef.update(this.state)      // this.state JE CONVINIENT POSTO SAM OVDE ZELO DA DEFINISEM 
                                                // {displayName: vrednsot}
                                                // DAKLE DA NISAM MORAO PISTAI {displayName: displayName} ILI 
                                                // {displayName}
            // MEDJUTIM NECU OVO GORE RADITI, JER ZA SVAK ISLUCAJ MOZE SE DESITI
            // DA JOS NESTO DODJE U STATE OVE KOMPONENTE (NECE ALI TREBA PAZITI)
            // ODNOSNO MORAM BITI DEFENSIVE, U SLUCAJ DA NEKE STVARI ODLUCI MDA PROMENIM KASNIJE

            this.userRef.upadate({displayName})

        }

    }

    render(){

        // REKAO SAM DA CE SE JSX SASTOJATI OD TRI REACT ELEMENTA

        return (
            
        );
    }
}

export default UserProfile;
```
