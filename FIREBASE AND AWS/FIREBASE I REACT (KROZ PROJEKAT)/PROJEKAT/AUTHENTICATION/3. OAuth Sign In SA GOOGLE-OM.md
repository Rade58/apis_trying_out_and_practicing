# OAuth Sign In SA GOOGLE-OM

DAKLE SADA CU WIRE UP-OVATI SIGNING IN WITH GOOGLE

DAKLE JEDNOSTAVNO JE ZA KORISNIKE, AKO NE BUDU IMALI ACCOUNT ZA MOJ APP, MOGU DA SE SIGN-UJU WITH GOOGLE

MOGU TO DA POKAZEM, KAKO JE USTVARI EASY DA NACINIM DA OAUTH FUNKCIONISE

ZAVISNO OD POTREBE, OVO USTVARI MOZE BITI SASVIM DOVOLJNO

DAKLE TOTALNO VALIDNA OPCIJA JE KADA IMPLEMENTIRAM SAMO FACEBOOK, TWITTER I GOOGLE SIGN-UPS; I NE NECESARILY ONAJ AUTHT SA SAMO EAMIL/PASSWORD

## IDEM OPET U FAJL GDE SAM KONFIGURIRAO FIREBASE, I TAMO UVOZIM NOVI MODUL, KOJI SE ZOVE 'firebase/auth'

src/**firebase.js**

```javascript
import firebase from 'firebase/app';

import 'firebase/firestore';

// UVOZIM 'firebase-auth'
import 'firebase/auth';

// POMENUTI MODUL CE BITI PATCH, ODNOSNO PATCH-OVACE 'firebase/app' SA
// AUTHENTICATION LOGIKOM

// DAKLE SLICNO KAO STO SAM URADIO I SA firestore

const firebaseConfig = {
    apiKey: "AIzaSyBNNF3Fz3Q8SLRUzmpDvEFG29QiMUQnGWg",
    authDomain: "think-clone.firebaseapp.com",
    databaseURL: "https://think-clone.firebaseio.com",
    projectId: "think-clone",
    storageBucket: "",
    messagingSenderId: "885463908020",
    appId: "1:885463908020:web:ba744ff22f41a4a7"
};

firebase.initializeApp(firebaseConfig);

export const firestore = firebase.firestore();

// KAO STO SAM EXPORT-OVAO FIRESTORE, TAKO CU EXPORT-OVATI I AUTHENTICATION
export const auth = firebase.auth();


// TAKODJE MORAM EXPORT-OVATI OAuth PROVIDER-A
// ODNONO JEDNU OD MOJIH SIGN IN TEHNIKA

// U OVOM SLUCAJU PROVIDER JE GOOGLE

export const provider = new firebase.auth.GoogleAuthProvider()

// DAKLE PRISTUPIO SAM I IZVEZAO SAM provider KONSTANTU

// IZVOZIM JOS JEDNU KONSTANTU, KOJA CU NAZVATI    signInWithGoogle
// TO CE USTVARI BITI FUNKCIJA, KOJA JE PROPERTI auth (firebase.auth() GORE DEFINISANO) OBJEKTA

// TIH FUNKCIJA KOJE MENI MOGU POSLUZITI IMA VISE

// A TA FUNKCIJA (ODNOSNO RAZLICITE FUNKCIJE) USTVARI TREBA DA DA POKRENE SIGNING IN SA GOOGLE-OM
// I ZATO POSTOJI

//              NA PRIMER FUNKCIJA, KOJA OTVARA SIGNING IN DIALOG,A LI U POP-UP

//              DRUGA ODRADI REDIRECTING DO SIGN IN DIALOG-A

// JA CU IZABRATI FUNKCIJU, KOJA OTVARA POPUP  (ZA SVE OSTALE MOZES PROVERITI KOJE SU SAMO KAD UKUCAS auth I // DODAS TACKU VIDECES MNOGO OPCIJA (KAO I ZA SVE DRUGO (PVO JE LEPOTA KORISCENJA VS CODE-A)))

// MOZDA NISAM REKAO RANIJE, AL ITA FUNKCIJA SE POZIVA SA PROVIDER-OM KAO ARGUMENTOM

export const signInWithGoogle = () => auth.signInWithPopUp(provider);

// MEDJUTIM, NISAM JE POZVAO OVDE
// ZELIM DA JE POZOVEM, KAO U NEKOM ON CLICK HANDLERU

// ZATO SAM IZVEZAO FUNKCIJU U CIJEM OBIM UJE POZIVANJE POMENUTE METODE


window.firebase = firebase;

export default firebase;

```

## DAKLE GORE SAM EXPORT-OVAO FUNKCIJU U MODULU signInWithGoogle

SVAKI PUT, KADA SE OVA FUNKCIJA BUDE POZVALA DESICE SE NESTO

**POJAVICE SE POP UP WINDOW, U KOJEM KORISNIK DAJE DOZVOLU ILI NE DA SE KORISTI NJEGOV GOOGLE ACCOUNT**

## ZATO SADA IDEM U SignIn KOMPONENTU, KAKO BI DEFINISAO POZIVANJE TE FUNKCIJE

SignIn.jsx FAJL

```javascript
import React, {Component} from 'react';

// MORAM PRVO UVESTI signInWithGoogle (KOJA KADA SE POZOVE
// OTVARA POP UP SA SIGN IN DIALOGOM) (TU OPCIJU SAM IZVEZAO IZ firebase.js)
import {signInWithGoogle} from '../firebase';

// SADA OVU FUNKCIJU MOGU ZAKACITI KAO onClick HANDLER
// NA DUGME KOJE IMA TEKST "Sign In With Google"


class SignIn extends Component {

    state = {email: '', password: ''};

    handleChange = ev => {

        const {name, value} = ev.target;

        this.setState({
            [name]: value
        });

    };

    handleSubmit = ev => {
        ev.preventDefault();

        this.setState({
            email: '',
            password: ''
        });

    };

    render(){

        const {email, password} = this.state;

        return (
            <form className="sign_in" onSubmit={this.handleSubmit}>
                <h2>Sign In</h2>
                <input
                    type="email"
                    name="email"
                    placeholder="Email"
                    value={email}
                    onChange={this.handleChange}
                />
                <input
                    type="password"
                    name="password"
                    placeholder="Password"
                    value={password}
                    onChange={this.handleChange}
                />
                <input
                    type="submit"
                    value="Sign In"
                />
                <button onClick={signInWithGoogle}>Sign In With Google</button>
            </form>
        )

        // KAO STO SE VIDI GORE ZADAO SAM POMENUTU FUNKCIJU
        // DA BUDE VREDNOST onClick

    };

}

export default SignIn;
```

## :bangbang::bangbang::bangbang::small_red_triangle_down::small_red_triangle_down::small_red_triangle_down: MEDJUTIM OVO NECE FUNKCIONISATI, A PREDPOSTAVLJAM DA JE RZLOG TOME ZATO STO MOJ APP NIJE DEPLOYED :small_red_triangle_down::small_red_triangle_down::small_red_triangle_down::bangbang::bangbang::bangbang:

IDI IPAK U <https://console.developers.google.com>

ONO STO PREDPOSTAVLJAM JESTE DA JE MORAM I PODESITI [CREDENTIALS](https://console.developers.google.com/apis/credentials/)

ODNOSNO IZABEREM MOJ APP TAMO I POKUSAVAM DA PODESIM NESTO STO SE ZOVE **OAuth consent scree** (TO JE TAB)

ALI JA TAMO NE VIDIM NISTA, OSIM STO JE DEFINISAN, OSIM ONIH DOMEN PODESAVANJA ALI I TO JE ZADATO

**MOZDA JE PROBLEM STO JE POTREBNO DA SE APP SERVE-UJE SA NEKOG DOMENA, ODNOSNO SA FIREBASE-A, A JA SAM KORISTIO localhost: 3000 ZA DEVELOPMENT, KADA SAM POKUSAVAO DA DEFINISEM AUTH WITH GOOGLE ACCOUNT**

POMENUTO CU ISPITATI

*U SVAKO MSLUCAJU JA SADA IMAM ERROR 403*

I VRATICU SE NA OVO, KADA BUDEM DEPLOY-OVAO MOJ APP NA FIREBASE, STO CE SE DOGODITI NAKON JEDNOG IL IDVA POGLAVLJA (RELATIVNO USKORO)