# WRITING SECURITY RULES

SADA BI TREBALO DA OTKRIJEM, KAKO I GDE TREBAM DA PISEM, POMENUTA SECURITY PRAVILA

## IDEM U KONZOLU U Database SEKCIJI, I ONOSTO CU ODMAH UCITI JESTE Rules TAB, KOJI NA SEBI IMA I :heavy_exclamation_mark: (EXCLAMATION POINT)

TO JE UPRAVO WARNING, JER KAO STO SAM REKAO RANIJE, DOZVOLJEN JE READING I WRITING BEZ OBZIRA NA SVE

DAKLE I SUVISE PERMISSIVE

KADA OTVORIM, POMENUTO VIDECU I OVAKAV WARNING

> :small_red_triangle: Your security rules are defined as public, so anyone can steal, modify, or delete data in your database

DAKLE, SASVIM JE JASNO DA OVO NIJE DOBRO

TU JE DAKLE I PRAVILO

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write;
    }
  }
}
```

*FINE FOR DEVELOPMENT*,ALI **ULTIMATIVNO LOSA STVAR**

## JA SADA ZNAM NESTO O SHAPE-U MOJIH PODATAKA; NAIME, ZNAM DA POSTOJE 'posts'; TAKO DA MOGU POCETI SA PISANJEM PRAVILA

MOGU DAKLE UKLONITI ONOS TO JE U OBIMU **match /databases/{database}/documents**

I MOGU POCETI PISANJE PRAVILA, KOJA SE TICU 'posts'

DOZVOLICU read USVAKOM SLUCAJU

A WRITE CE BITI DOZVOLJEN SAMO AKO JE KORISNIK AUTHORIZED

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /posts/{postId} {
      allow read;
      allow write: if request.auth.uid != null;
    }
  }
}
```

DEFINISUCI RANIJE ON AUTH STATE CHANE, U MOM APP-U, PROSLEDJIVAO SE OBJEKAT user KOJI JE IMAO PROPERTIJE uid, displayName ITD.

AKO JE KORISNIK NIJE LOOGED IN user JE null

A AKO JE LOGGED IN user JE ONAJ OBJEKAT, SA POMENUTIM PROPERTIJIMA

## SADA DA SACUVAM TA PRAVILA, MOGU PRITISNUTI CTRL + S, ILI PRITISNUTI Publish DUGME U KONZOLI

TREBNACE IM MINUT DA SE PROPAGATE-UJU, ALI GENERALNO RECENO, IT'S PRETTY QUICK

## MOGU OVO ODMAH TESTIRATI U MOM APP-U

JA SAM SADA SIGNED OUT DAKLE

**PRIMETICU NESTO CUDNO, KADA BUDEM, POKUSAO DA KREIRAM NOVI POST** (**NESTO STO CE TRJATI, MOZDA MANJE OD SEKUNDE**)

NOVI POST CVE NAIME BITI KREIRAN, ODNOSNO NOVI DOKUMENT CE BITI STAVLJEN U 'posts' KOLEKCIJU

KAKO TO ZNAM?

PA ZAISTA CE NOVI PSOT BITI PROSLEDJEN U STATE APLIKACIJE

AKO SE PODSETIM, SLUSANJE SNAPSHOTA CE OMOGUCITI PROMENU STATE-A

TO I NIJE SPORNO