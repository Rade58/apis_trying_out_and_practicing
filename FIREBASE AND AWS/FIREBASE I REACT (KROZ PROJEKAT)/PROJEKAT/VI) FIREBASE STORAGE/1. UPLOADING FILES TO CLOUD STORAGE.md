# FIREBASE CLOUD STORAGE

DAKLE SAV MOJ POSAO KOJI SAM OBJASNJAVAO U PREDHODNOM FOLDERU, A KOJ ISE TICAO SLUSANJA SNAPSHOTA ZA USER DOCUMENT, JE VODIO KA TOME DA VIDIM ODMAH PROMENE NA USER INTERFACE-U, KADA SE NAPRAVE PROMENU U RELATED USER DOCUMENT-U

**DAKLE IMA, KAO STO KINNEY KAZE "NICE FEEDBACK LOOP"**

SADA ZELIM DA RADIM NA STORAGE-U

DAKLE ZELIM DA PODESIM DA KORISNIK MOZE DA UPLOAD-UJE NOVU SLIKU; KOJA CE BITI STORED U STORAGE BUCKET-U

ZATIM DEFINISACU GETTING TO URL-A U STORAGE BUCKET-U

I TO CU KORISTITI KAO NEW photoURL

TO ZNACI DA CE I EMAIL AUTHETICATED USERI IMATI MOGUCNOST DA PODESE SLIKU

## IDEM SADA U src/firebase.js; I TAMO CU DA UVEZEM NOVI MODUL IZ 'firebase' PAKETA; ODNOSNO IMPORTUJEM 'firebase/storage' FUNKCIJU

```javascript
import firebase from 'firebase/app';

import 'firebase/firestore';
import 'firebase/auth';

// DA IMPORTUJEM POMENUTU FUNKCIJU
//***********************************
import 'firebase/storage';
//***********************************

// NE VEZAN OZA TRENUTNU TEMU
// ZA RAZLIKU OD OVOGA OVDE, KINNEY, JE OVAJ OBJEKAT, CUVAO U .JSON FAJLU
const firebaseConfig = {
    apiKey: "AIzaSyBNNF3Fz3Q8SLRUzmpDvEFG29QiMUQnGWg",
    authDomain: "think-clone.firebaseapp.com",
    databaseURL: "https://think-clone.firebaseio.com",
    projectId: "think-clone",
    storageBucket: "",
    messagingSenderId: "885463908020",
    appId: "1:885463908020:web:ba744ff22f41a4a7"
};
// PA GA JE IMPORTOVAI I ISKORISTIO ZA SLEDECI INICIALIZATION
firebase.initializeApp(firebaseConfig);
// ALI NEKA OSTANE OVAKO (JA BIH POMNUTO USTVARI MOGAO URADITI, IAKO GORE PRIKAZANE STVARI NISU SECRET)

//******************************************************************************
// DA SE VRATIM SADA NA TEMU; OVDE NAIME MOGU INICIJALIZOVATI, TAJ STORAGE
// I IZVESTI GA NARAVNO
export const storage = firebase.storage();
//******************************************************************************

export const firestore = firebase.firestore();

export const auth = firebase.auth();

export const provider = new firebase.auth.GoogleAuthProvider();

export const signInWithGoogle = () => auth.signInWithPopup(provider);

export const signOut = () => auth.signOut();


export const getUserProfileDocument = async (uid) => {
    if(!uid) return null;

    try{
        return firestore.collection('users').doc(uid)

    }catch(error){

        console.error("Error fetching user: ", error.message);

    }


}

export const createUserProfileDocument = async (user, additionalData) => {
    if(!user) return;

    const userRef = firestore.doc(`users/${user.uid}`);

    const docSnapshot = await userRef.get();

    if(!docSnapshot.exists){

        const createdAt = new Date();

        const {displayName, photoURL, email} = user;


        try{
            userRef.set({
                displayName,
                photoURL,
                email,
                createdAt,
                ...additionalData
            })

        }catch(error){
            console.error("Error creating user: ", error.message);
        }

    }

    return getUserProfileDocument(user.uid);

}


window.firebase = firebase;

export default firebase;
```

## SADA CU POMENUTI STOREAGE WIRE UP-OVATI SA USER PROFILE STRANICOM; ODNOSNO UVESCU GA U src/components/UserProfile.jsx FAJL; JER TAM OCU GA KORISTITI, SA REF-OM, KOJI SAM NAPRAVIO ZA input TIPA "file"
