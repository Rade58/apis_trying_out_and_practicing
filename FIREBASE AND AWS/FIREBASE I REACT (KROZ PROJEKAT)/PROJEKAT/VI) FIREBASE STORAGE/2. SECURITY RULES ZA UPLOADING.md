# SECURITY RULES FOR UPLOADING

DAKLE REKAO SAM DA JE ZA SADA UPLOAD PROHIBITED, JER NEMA PRAVILA

**STA BI SE DOGODILO DA DOZVOLI MSVAKOME DA UPLOAD-UJE BILO STA, BILO GDE**

## JA CU USTAVRI URADITI, NEKE REALLY BASIC SECURITY RULES

## IDEM U Storage DEO, KONZOLE FIREBASE-A, I TAMO PRITISKAM 'GET STARTED'

BICE PRIKAZANA SLEDECA PRAVILA, KOJA SU MI USTVARI PONUDJENA DA DOZVOLIM DA ONA BUDU USVOJENA

```javascript
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

U SUSTINI OVA PRAVILA SU, SADA *PREVISE PERMISSIVE*

**JER MATCH-UJE SE BILO KOJI BUCKET, I NA BILO KOJEM PATH-U, FAJL MOZE BITI I read-OVAN I write-OVAN; AKO JE KORINIK AUTHORIZED**

## JA NARAVNO U DIALOGU, OVA PRAVILA PRIHVATAM, I ZATVARAM CELI TAJ GETTING STARTTED DIALOG; I TADA SE TEK DEFAULT BUCKET KREIRA ZA NEKOLIKO SEKUNDI (POSTOJALA JE I OPCIJA LOKACIJE DEFAULT BUCKET-A U TOM DIALOG-U, ALI JA SAM RANIJE PRI PODESAVANJU FIRESTORE-E CINI MI SE ODABRAO DEFAULT LOKACIJU; ZATO OVDE NISAM MOGAO MENJATI NISTA)

U SUSTINI KADA SE KREIRAJU DEFAULT STVARI; JA MOGU TU, U OKVIRU Storage SEKCIJE FIREBASE KONZOLE, DA IZABEREM I **Rules** I DA REDEFINISEM TE PREVISE PERMISSIVE RULES

**DAKLE JA CU DEFINISATI SLEDECE**: 

>>>> NE SME DA SE URADI NISTA SEMA AKO IMAM MATCHING **'/user-profiles/{userId}/{photoURL}'** 

- **TADA DOZVOLJAVAM read** (ANYONE CAN READ IT)

- **TADA DOZVOLJAVAM write**, ALI SAMO *POD USLOVOM*: request.auth.uid ODGOVARA GORNJEM userId-JU (RANIJE SAM DEFINISAO DA uid TRENUTNOG KORISNIKA BUDE I IME FOLDER-A U KOJI STAVLJAM FAJL (A OVDE ZA VARIJABLU PATHA, KOJOJ SAM DAO IME userId, TRAZIM MATCH KAOJ ITREBA DA ODGOVARA uid-JU))

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    
    match /user-profiles/{userId}/{photoURL} {
        
        allow read;

        allow write: if request.auth.uid == userId;

    }
  
  }
}
```

SAVE-UJEM ODNOSNO PUBLISHUJEM OVA PRAVILA U KONZOLI (PROPAGATION MOZE POTRAJATI)

**DAKLE SVAKO MOZE CITATI FAJL, A JEDINO KORISNIK MOZE UPLOAD-OVATI FAJL**
