# WEB WORKERS

>>> Web Workers makes it possible to run a script operation in a background thread separate from the main execution thread of a web application.
OMOGUCAVA SLEDECE:

NAPORAN PROCESSING SE MOZE OBAVITI U ODVOJENOM THREDU (BACKGROUND THREAD-U), STO CE OMOGUCITI MAIN THRED-U (USER INTERFACE THREDU) DA RADI BEZ BLOKIRANJA I USPORENJA

## Worker INSTANCA

- TO JE INSTANCA KOJA SE INSTANCITIZIRA, Worker KONSTRUKTOROM

- ARGUMENT KONSTRUKTORA JE **PATH IMENOVANOG JAVASCRIPT FAJLA**

- POMENUTA INSTANCA TREBA DA POKRECE, TAJ **IMENOVANI JAVASCRIPT FAJL** (ODNOSNO TAJ FAJL, JESTE ONAJ FAJL KOJI CE BITI POKRENUT U WORKER-OVOM THREAD-U)

## GLOBALNI CONTEXT (GLOBAL SCOPE, ODNOSNO GLOBALNI OBIM) NIJE window, U SLUCAJU, GORE POMENUTOG 'IMENOVANOG JAVASCRIPT FAJLA'

- **self** SE KORISTI, UMESTO window-A (window (Window INSTANCA) JE, GLOBALNI CONTEXT, SAMO, ZA UI (BAR JA TO TAKO VIDIM), ODNOSNO ZA THREAD, KOJI RUKUJE DOM-OM)

- POMENUTO **self** JE USTVARI, U SLUCAJU **'TOG WORKER-OVOG THREAD-A'**, INSTANCA SLEDECIH KLASA

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; **DedicatedWorkerGlobalScope** (NASTALE KAO POSLEDICA KREIRANJA Worker INSTANCE (U main THREAD-U), A TO SE KREIRAO Worker OBJEKAT, KOJ IJE U RELACIJI SA JAVASCRIPT FAJLOM, KOJEG KORITI, POMENUTI GLOBALNI OBIM, A TAJ GLOBALNI OBIM JESTE INSTANCA  DedicatedWorkerGlobalScope) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ILI

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; **SharedWorkerGlobalScope** (I KOJEG INSTANTICIZIRA **SharedWorker** KONSTRUKTOR)

>>>KADA SE self KORISTI U MAIN THREAD-U, ONO JEST REFERENCA ZA window OBJEKAT

## SCRIPTOVI, KOJI UPOTREBLJAVAJU WORKER-E NE MOGU MANIPULISATI DOM-OM

ALI MOGU KORISTITI OGROMAN BROJ ITEMA, KOJE KORISTI window, KAO STO JE [WebSocket](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API) ILI [indexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)

A OVO JE [CELA LISTA FUKCIJA I KALSA KOJE SU DOSTUPNE WEB WORKER-IMA](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Functions_and_classes_available_to_workers)

## SLANJE PODATKA IZMEDJU WORKER-OVOG I MAIN THREAD-A

OBE STRANE, I WORKER-OV THREAD, I MAIN THRED, MOGU SLATI DATA, SISTEMOM PORUKA, ODNOSNO POZIVANJEM SLEDECE metode

- **postMessage()**

A KADA STIGNE PORUKA U THREAD (BIO TO WORKER-OV ILI MAIN), TRIGGERUJE SE

- EVENT TIPA **'message'** (ODNOSNO **MessageEvent** INSTANCA) U ONOM THREADU U KOJEM PORUKA STIZE

- PODACI SE NALAZE U **MessageEvent.data** (ODNOSNO event.data (AKO SAM TAKO NAZAVAO PARAMETAR HANDLER-A))

*PODACI SU, USTVARI KOPIRANI, A NE SHARE-OVANI* (PREDPOSTAVLJAM DA OVO ZNACI DA WORKER-OV THREAD NE MOZE MENJATI PODATKE, MAIN THREAD-A, I OBRNUTO)

## JEDAN WORKER, MOZE SPAWN-OVATI NOVI WORKER

TO JE SAMO MOGUCE AKO SU HOSTED U ISTOM ORIGINU (MOZDA SE OVDE MISLI NA DOMEN), KAO I PARENT STRANICA (MISLIM DA OVO ZNACI DA, KADA NA SEVERU IMAM MAIN PAGE, DA I ONAJ WORKER-OV THREAD, KOJI JE SPAWNED OD STRANE MAIN THREADA, A I ONAJ WRKER-OV THREAD, KOJEG SPAWN-UJE DRUGI WORKER THREAD, MORAJU BITI SUSEDNI FAJLOVI)

## WEB WORKER THREAD-OVI MOGU KORISTI XMLHttpRequest

ALI UZ EXCEPTION, KOJI MI BAS I NIJE JASAN JER NEDOVOLJNO DETALJNO POZNAJEM ARHITEKTURU, POMENUTOG REQUESTA

A TA JEXCEPTION JESTE SLEDECI:

>>> exception that the responseXML and channel attributes on XMLHttpRequest always return null

## PORED DEDICATED WORKER-A, POSTOJE I DRUGI TIPOVI WORKER-A

- [SHARED WORKER](https://developer.mozilla.org/en-US/docs/Web/API/SharedWorker) (SharedWorker INSTANCA)

- [SERVICE WORKER](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) (ServiceWorker INSTANCA)

- [ChromeWorker](https://developer.mozilla.org/en-US/docs/Mozilla/Gecko/Chrome/API/ChromeWorker) (NESTANDARDNO (SAMO JE SUPPORTED U FIREFOX-U))

- [AUDIO WORKER](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API#Audio_Workers) (PISE DA JE JAKO KOMPLIKOVANOG, ZA ONOG KO NE POZNAJE ODLIKA AUDIO-A)

## INTERFEJSOVI WEB WORKER-A

[INTERFACES](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API#Web_Worker_interfaces)

ZAPISACU IH SVE OVDE KADA IH NAUCIM (USKORO)

## RAZGRANICENJE (MOJE TERMINOLOSKO) IZMEDJU TERMINA Worker I TERMINA DedicatedWorkerGlobalScope

- Worker KONSTRUKTOROM SE INSTATICIZIRA Worker INSTANCA (U MAIN THREAD-U)

- CIME SE DEFINISE DA GLOBALNI OBIM IMENOVANOG JAVASCRIPT FAJLA (NOVI THREAD) (CIJI PATH JE ARGUMENT Worker KONSTRUKTORA, PRI NJEGOVOM INSTATICIZIRANJU), USTVARI POSTANE DedicatedWorkerGlobalScope INSTANCA, KOJA JE, 'SLICNA' Window INSTANCI (SAMO STO JEDNA OD NJIH NE MOZE RUKOVATI DOM-OM, A JA ZNAM KOJA MOZE)
