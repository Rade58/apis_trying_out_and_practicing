# HOOK-OVI PLUGIN INSTANCE

RANIJE SAM KORISTIO [done](https://webpack.js.org/api/compiler-hooks/#done) HOOK, KOJI JE Compiler-OV HOOK, I POMENUTI HOOK SE EXECUTE-UJE AFTER COMPILATION COMPLETE

## JA MEDJUTIM SADA ZELIM DA SE HOOK-UJEM U NESTO DRUGO, A U CILJU DA BIH VIDEO KAK OSE TO HOOK TRIGGER-UJE

ZATO CU SADA KORISTITI NEKI [Compilation HOOK](https://webpack.js.org/api/compilation-hooks/)

POSTAVLJA SE PITANJE: KAKO SE USTVARI HOOK-OVATI U NESTO STO NIJE Compiler

## NARAVNO POCINJE SE UVEK OD Compiler-A

>>> I TREBAM DA USVOJIM ONAJ NACIN 'POSMATRANJA HOOK'-OVA, KROZ /node_modules/webpack/lib (TAMO PRONALAZIM Compilation.js ILI Compiler.js ILI Parser.js)

**DA BIH PRISTUPIO Compilation INSTANCI I KAKO BI KORISTIO NJENE HOOK-OVE, JA SE PRVO MORAM KORISTITI Compiler-OV HOOK, KOJI SE ZOVE [compilation](https://webpack.js.org/api/compiler-hooks/#compilation)**

POMENUTI HOOK SE TRIGGER-UJE BEFORE FINISHING-A COMPILATION-A

ZA OVAJ HOOK, MOGAO SAM VIDETI, IZ SOURCE CODE-A DA SE PARAMETRI CALLBACK-A USTVARI ODNOSE NA Compilation INSTANCU I NA NEKE PARMAETRE

```javascript
class MyFirstWebpackPlugin {

    apply(compiler){

        compiler.hooks.done.tapAsync("MyFirstWebpackPlugin", (stats, callback) => {

            const assetNames = []

            for(let assetName in stats.compilation.assets){

                assetNames.push(assetName);

            }

            debugger;

            callback();

        })

        // DAKEL AKO ZELIM DA SE HOOK-UJEM U NEKU DRUGU INSTANCU, I DALJE IPAK MORAM TO URADITI KROZ Compiler

        // IZ Compiler.js MOGAO SI DA VIDIS DA JE compiler HOOK, USTVARI SYNC HOOK-U,
        // TO ZNACI DA CES KORITITI:

        //                                  tap()           METODU

        //

        // STO SE TICE SYNC HOOK-OVA, NE POSTOJI ONAJ CALLBACK, KOJ ISE POZIVA NA KRAJU ARGUMENT CALLBACK-A, KAO STO JE TO BIO SLUCAJ SA done HOOK-OM

        compiler.hooks.compilation.tap('MyFirstWebpackPlugin', (compilation, params) => {

            // SADA MOGU DA KORISTIM HOOK   Compilation INSTANCE

            // compilation.hooks.

        })


    }
}

module.exports = MyFirstWebpackPlugin;
```

## KOJI BI SADA HOOK Compilatio nINSTANCE MOGAO DA KORISTIM?

VALUABLE HOOK TO KNOW IS: (LUDI SU ZELEL IDA ZNAJU O NJEMU IN THE PAST)

- seal

KOJI OMOGUCAVA DA SE HOOK-UJEM U WEBPACK JUST BEFORE STARTS TO RENDER THE CODE (TO JE FAZA KOAJ SE NAZIVA **seal FAZA**)

*KORISCENJEM OVOG HOOK-A NECU DOBITI BACK NIKAKAV STATE (ALI I OANKO IMAM ACCESS TO THE COMPILATION), ALI CU DAKLE OMOGUCITI DA SE SINHRONO STANE NA POMENUTOM EVENT-U I DA SE IZVRSI NESTO STO CU ZADATI; NAKO NCEGA CE WEBPACK-U BITI ALLOWED TO CONTINUE*

```javascript
class MyFirstWebpackPlugin {

    apply(compiler){

        compiler.hooks.done.tapAsync("MyFirstWebpackPlugin", (stats, callback) => {

            const assetNames = []

            for(let assetName in stats.compilation.assets){

                assetNames.push(assetName);

            }

            // debugger;

            callback();

        })


        compiler.hooks.compilation.tap('MyFirstWebpackPlugin', (compilation, params) => {

            // DAKLE I seal HOOK JE SYNC

            compilation.hooks.seal.tap('MyFirstWebpackPlugin', () => {

                // PODESICU OVDE DEBUGGER

                debugger;


            })

        })


    }
}

module.exports = MyFirstWebpackPlugin;
```

*STA USTVARI PREDSTAVLJA FINISHIRANJE COMPILATION-A*

**PA TO ZNACI PRAVLJENJE DEPENDANCY GRAPHA**

KAD RUNN-UJES DEBUG SCRIPT VIDECES DA CE SE PAUZIRANJE NA TVOM BREAKPOINTU DOGODITI BRZO, A BUILDING KONFIGURACIJE CE BITI PAUZIRANO NEGDE NA 10%, STO MOZES VIDETI U TERMINALU

## JASNO TI JE DA SU TI U SLUCAJU BREAKPOINTA, DOSTUPNE GLOBALNE VARIJABLE, I ONE VARIJABLE OBIMA U KOJEM JE DEBUGGER

MOZE TI POSTATI TESKO DA PRONALAZIS SVE TE GLOBALNE VARIJABLE

A UOSTALOM U GORNJI CALLBACK NE PRIHVATA ARGUMENTE

ONA JEDINA GLOBALNA VARIJABLA KOJA TI JE POTREBNA JESTE ONA KOJA REFERENCES Compilation INSTANCU

PA MOZES KREIRATI NOVU LOKALNU VARIJABLU I NJOJ ASSIGN-OVATI compilation

```javascript
class MyFirstWebpackPlugin {

    apply(compiler){

        compiler.hooks.done.tapAsync("MyFirstWebpackPlugin", (stats, callback) => {

            const assetNames = []

            for(let assetName in stats.compilation.assets){

                assetNames.push(assetName);

            }

            // debugger;

            callback();

        })


        compiler.hooks.compilation.tap('MyFirstWebpackPlugin', (compilation, params) => {

            compilation.hooks.seal.tap('MyFirstWebpackPlugin', () => {

                // SADA JE compilation I LOKALNO
                const thisCompilationIWantToInspect = compilation

                debugger;

            })

        })

    }
}

module.exports = MyFirstWebpackPlugin;
```

**I SADA NAKON STO RUNN-UJEM DEBUG SCRIPT, I KADA SE PAUZIRA DO MOG BREAKPOINT-A, IMACU U ONOM, POMENUTOM MENU-U SA STRANE, PRIKAZANU I LOKALNU VARIJABLU KOJU SAM KREIRAO**

**NARAVNO, AKO KUCAM U DEBUG CONSOLE-U, IME POMENUTE VARIJABLE, ISTO TAKO CU MOCI DA JE INSPECT-UJEM**

## MEDJUTIM POZNATO MI JE DA IMAM PRISTUP I CLOSURE-IMA TOKO MDEBUGGING-A


```javascript
class MyFirstWebpackPlugin {

    apply(compiler){

        compiler.hooks.done.tapAsync("MyFirstWebpackPlugin", (stats, callback) => {

            const assetNames = []

            for(let assetName in stats.compilation.assets){

                assetNames.push(assetName);

            }

            // debugger;

            callback();

        })


        compiler.hooks.compilation.tap('MyFirstWebpackPlugin', (compilation, params) => {

            compilation.hooks.seal.tap('MyFirstWebpackPlugin', () => {
                
                compilation;        // SADA JE COMPILATION UPRAVO CLOSURE
                // JA SAM MOGAO DA UMESTO OVOGA URADIM       console.log(compilation)
                // ALI NEMA VEZE NECU DA POLUTE-UJEM TERMINAL

                debugger;

            })

        })

    }
}

module.exports = MyFirstWebpackPlugin;
```

## ONO STO JE USTVARI BITNA STVAR JESTE DA JE MOGU PRIMENJIVATI METODE NAD Compilation INSTANCOM, MOGU VRSITI MODIFIKACIJE CODE-A

MOGU I ACCESS-OVATI INFORMACIJMA

## HAJDE DA SE DRZIM COMMON EXAMPLE-OVA

ODNOSNO HAJDE DA NESTO URADIM KONKRETNO

## OVO CE MI BITI I PRILIKA DA SE U POZNAM SA FAMOZNIM ENHANCED RESOLVER-OM

RECIMO DA ZELIM DA DEFINISEM DA SE, U CERTAIN ENVIROMENT-U NESTO URADI, KADA KORISNIK MOG PLUGIN-A, REFERENCES NEKI SPECIFIC PATH; I TO BI BIO VEOMA COMMON EXAMPLE

DAKLE JA MOGU HOOK INTO IT WITH A **RESOLVER** :

I MOGU DEFINISATI DA PATH PROMENIM U NESTO DRUGO, I DA SE GIVE-UJE NEKI DRUGI MODUL INSTEAD OF TRAZENOG

## KAKO LARKIN KAZE "YOU CAN ENTIERLLTY FAKE HAPPENING RESOLUTION INSTANCE LIKE THIS"

## MEDJUTIM MORAO BIH MALO DA SE UPOZNAM SA RESOLVERIMA

