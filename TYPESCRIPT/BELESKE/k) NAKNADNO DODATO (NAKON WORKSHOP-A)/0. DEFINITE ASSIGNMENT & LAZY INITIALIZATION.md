# DEFINITE ASSIGNMENT (!:) I LAZY INITIALIZATION

DEFINITE ASSIGNENT I LAZY INITIALIZATION IDU RUKU POD RUKU

- JEDNO OBJASNJAVA 'KADA CU' INICIJALIZOVATI MEMEBER-A

******

digresija:

MISLIM DA SI NAPRAVIO POGRESAN ASUMPTION TOKOM VEZBANJA DAEFINITE ASSIGNMENT-A, U WORKSHOPU

ZATO ZELIM OVDE DA TO KLERIFIKUJEM

A UZ TO ZELIM DA PROVEZBAM I LAZY INITIALIZATION

******

******

ZAPAZANJE:

MISLIM DA OVO KADA SE COMPILE-UJE U JAVASCRIPT, PREVAZILAZI KLASU KAO KONCEPCIJU

ODNOSNO NAJBOLJE JE DA KAZEM DA JE OVO WORKAROUND AKO POSMATRAM ONO STO JE COMPILED U JAVASCRIPTU

A U TYPESCRIPTU, OVAJ KONCEPT JE VEZAN UZ KLASU

PREDPOSTAVLJAM ZATO STO JE U NEKIM DRUGI MTYPED JEZICIMA TAKO

******

## DEFINITIE ASSIGNMENT (!:)

OVO SE DAKLE ODNOSI NA MEMBER-E KALSE

U SUSTINI TREBA POSTAVITI SLEDECE PITANJE: *STA AKO JE MOGUCE NAZNACITI NEKAKO DA CE INICIJALIZOVANJE MEMBERA BITI SPROVEDENO ODLOZENO, MOZDA KASNIJE* (MIRISE NA PROMISE; DA BICE UPOTREBLJENO KASNIJE I S TIM NISTA NEMA DEFINITE ASSIGNMET OPERATOR, AKO GA TAKO SMEM NAZVATI OPERATOROM)

POGLEDAJ PRIMER I RECI CU TI U KOMENTARIMA STA JE BITNO DA URADIS

```typescript
class Lateralus {
  tool!: string       //  DA NISI NAPISAO       !:        TYPESCRIPT BI YELL-OVAO NA TEBE:
                              //                                     KAKO NISI INICIJALIZOVAO   MEMBER-A  U KONSTRUKTORU
                            //                                       ALI POSTO SI STAVIO !:     **NEMA ERRORA**

}

// U STA BI BIO COMPILED GORNJI CODE (GOVORIM O COMPILING-U U JAVASCRIPT)
// !!!      PA U SAMO        KLASU BEZ MEMEBER-A (SAMO KLASA I EMPTY CONSTRUCTOR U NJOJ) (ZATO STO GORE NISAM DEFINISAO NI
//  
```

DAKLE NEMA SMISAL DEFINITE ASSIGNMENT KORISTITI BEZ NECEG DODATNOG, A TO JE LAZY INITIALIZATION

## LAZY INITIALIZATION *NASTAVLJA PRICU DEFINITE ASSSIGNNMENTA*

STO JE DEFINITE ASSIGNMENT REAKAO DA CE SIGURNO BITI URADJENO (*DA CE MEMBER BITI DEFINITIVN OASSIGNED*), VREME JE DA JA SPROVEDEM  UDELO, KORISTECI DEFINITE ASSIGNMENT

POSTO JE LAZY, PREDPOSTAVLJAM DA ZNACI DA TREBA DA BUDE ASINHRONO

**ONO STA CU USTVARI URADITI JESTE KREIRANJE NEKE ASINHRONE METODE, KOJA TREB DA ASINHRONO INICIJALIZUJE *tool* MEMEBER**

```typescript
class Lateralus {
  tool!: string


  // EVO KREIRAM PRIVATNU ASINHRONU METODU, KOJOJ CE CILJ BITI DA
  // ASINHRONO INICIJALIZUJE tool MEMBER-A
  private async init(param: string) {

    let prom: Promise<string> = new Promise((res) => {
      setTimeout(() => {
        res(param)
      }, 800)
    }) 

    // KADA BUDE RESOLVED OVAJ PROMISE
    // S ONIM CIME BUDE RESOLVED CU INICIJALIZOVATI tool MEMBER-A
    let resVal =  await prom

    this.tool = resVal
  }

  
}
```

## MEDJUTIM JOS NIJE KRAJ; JER NESTO TREBA DA POKRENE TU ASINHRONU METODU

**TO CE BITI SETTER, ON CE JE POKRENUTI I DATI JOJ ONO STO SETT-ERU BUDE ASSIGNED**

*U OVOM SLUCAJU SETTER NE SME IMATI ISTO IME KAO I MEMEBER*

```typescript
class Lateralus {
  tool!: string

  private async init(param: string) {

    let prom: Promise<string> = new Promise((res) => {
      setTimeout(() => {
        res(param)
      }, 800)
    }) 

    let resVal =  await prom

    this.tool = resVal
  }

  // EVO GA SETTER
  set toolMemeber(param: string){
    this.init(param)
  }
  
}

// ***** NEK IZAMISLENI REDOVI CODE-A
// ***** NEK IZAMISLENI REDOVI CODE-A
// ***** NEK IZAMISLENI REDOVI CODE-A
// ***** NEK IZAMISLENI REDOVI CODE-A
// ***** NEK IZAMISLENI REDOVI CODE-A

// INSTANTICZIRACU GORNJU KLASU

const lat: Lateralus = new Lateralus()


// ***** NEK IZAMISLENI REDOVI CODE-A
// ***** NEK IZAMISLENI REDOVI CODE-A
// ***** NEK IZAMISLENI REDOVI CODE-A
// ***** NEK IZAMISLENI REDOVI CODE-A

// ODLUCIO SAM OVDE DA CE MI ZA NESTO TREBATI ONAJ tool MEMBER, GORNJE INSTANCE
// INICIJALIZOVACU NJEGOVA ASINHRONO SETT-OVANJE

lat.toolMemeber = "EANIMA"


//
setTimeout(() => {
  console.log(lat.tool)
}, 801)

```

******

OVAJ LAZY INITIALIZATION KAD BOLJE RAZMISLIM JESTE BLILIANTAN

AKO TREBA NESTO DA SE OBAVI, NEKA CPU INTENSIVE OPERACIJA BILA BI DEFINISANA U ONOJ init METODI

PO POTREBI JA BI ONDA POZVAO GETTER-A KOJI CE ONDA INVOKE-OVATI LAZY INITIALIZATION

******
