# GOING TO TRY REVUE FOR MY NEWSLETTER

<https://www.getrevue.co>

API:

<https://www.getrevue.co/api#get-/v2/lists>


**LERROB USED LIKE THIS**:

SUBSCRIPTION ENDOINT:

<https://github.com/leerob/leerob.io/blob/main/pages/api/subscribe.ts>

GETING SUBSCRIBERS ENDPOINT:

<https://github.com/leerob/leerob.io/blob/main/pages/api/subscribers.ts>

# MY SUBSCRIPTION FLOW

THERE IS NO WAY TO ANTICIPATE USERS CONFIRMATION WHEN HE GETS FIRST EMAIL, AFTER SUBSCRIBING

SO, THIS IS GOING TO BE THE FLOW

1. CREATING SUBSCRIPTION `GETREVUE`

2. CREATING RECORD IN MY DATBASE (EMAIL AND USERNAME)

**BUT AS A POSSIBLE WAY OF BEING PREPARED FOR VENDOR LOCKING, I AM GOING TO COLLECT EMAILS OF SUBSCRIBERS IN MY DATABSE**

# DECIDE IF YOU SHOULD OR NOT HAVE AN UNSUBSCRIBE PAGE

**IF YOU IMPLEMENT THAT, YOU SHOULD DEMAND AUTHENTICATION**

**OR PAGE SHOULD BE DYNAMIC**

I'M NOT GOING TO DO THAT

# TODO 

SET UP DOMAIN

HAVE SOME TROUBLE

# NEED TO DO HACKY THING WITH BULLMQ AND REDIS (AT THE END I FIGURE IT OUT THAT I DIDN'T NEED BULLMQ AFTER ALL)

THIS IS GOING TO BE FLOW

1. ON SUBSCRIPTION (I'M **NOT** TALKING ABOUT CONFIRMATION, I'M TALKING ABOUT INITIAL SUBSCRIPTION), WE ARE GOING TO QUEUE JOB INTO REDIS

AND THIS ISN'T A HACKY THING, WE ARE JUST GOING TO PUT SUBSCRIPTION IN OUR DATABASE TOO, BECAUSE WE DON'T WANT TO BE UNPREPARED FOR VENDOR LOCKING

2. **WE NEED TO DO THIS BECAUSE REVUE API ISN'T THAT FLEXIBILE (IT DOESN'T ALLOW QUERYING FOR SINGLE USER)** IS THAT WE ARE GOING (FROM TIME TO TIME), TO CHECK ON OUR `UNSUBSCRIBED` USERS

***
***
***
***

**WE ARE NOT GOING TO DO THIS, BECAUSE I FIGURE IT OUT THAT THIS ACTUALLY BAD**

**EVERY TIME NEW SUBSCRIPTION IS CREATED (WHICH IS NOT RELEVANT BUT KEEP LISTENING), WE ARE GOING TO USE BULL JS TO SCHEDULE A JOB THAT WILL AT SOME POINT IN THE FUTURE CHECK IF ANY USER IS UNSUBSCRIBED; AND IF USER IS UNSUBSCRIBED, `WE ARE GOING TO MARK USER (NEWSLETTER RECORD) OBJECT IN OUR DATABASE AS UNSUBSCRIBED`**

***
***
***

INSTEAD WE ARE GOING TO SET UP CRON JOB

**BUT I WILL KEEP BULLMQ, BECAUSE I WANT TO USE IT** (JUST FOR THAT REASON)

CRON JOB WILL HIT ADD TO QUEUE ROUTE


# TO SET UP CRON JOBS WE ARE GOING TO USE THIS

<https://www.easycron.com/>

AND WE ARE FOLLOWING [THIS ARTICLE](https://medium.com/@dbredvick/how-to-create-a-cron-job-with-nextjs-and-now-159aa973c00e)

# MOGUCI PROBLEMI

AKO SE KORISNIK SUBSCRIBE-UJE SA MOJE REVUE PROFILNE STRANICE BICU U PROBLEMU, JER TOG USERA NISAM STORE-OVAO U SVOM DATABASE-U

MORACU DA SE POMIRIM S TIM

JEDINO STO CU NA TWITTERU I OSTALIM SOCIJALNIM SKLAMERIJAMA IMATI LINK DO STRANICE KOJA CE BITI SMAO NAMENJENA A NEWSLETTER

# PROMENA PLANA IMACU JOS JEDAN CRON JOB, KOJI CE PROVERAVATI SUBSCRIBERS, A KOJI CE SE DESAVATI, JOS REDJE OD ONOG CRON JOB-A, KOJI PROVERAVA UNSUBSCRIBER-E

NA PRIMER, JEDNOM U TRI MESECA TREBA PROVERITI I SUBSCRIBER-E

I NJIH POHRANITI U NAS DATABASE



